<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { color: #00769e; background-color: #f1f3f5; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #00769e; } /* Normal */
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #657422; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #00769e; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #00769e; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #00769e; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
  <title>Behind the numbers: comparing extreme poverty and GDP per capita by world regions</title>

  <meta property="description" itemprop="description" content="By recreating from group up a OurWorldinData chart about extreme poverty vs GDP per capita we look at the foundations of Data Visualisation techniques layer by layer. Further, this project also proposes 2 alternative representation for the original data to better understand the story behind the numbers."/>


  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2025-01-17"/>
  <meta property="article:created" itemprop="dateCreated" content="2025-01-17"/>
  <meta name="article:author" content="Mafalda González-González"/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="Behind the numbers: comparing extreme poverty and GDP per capita by world regions"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="By recreating from group up a OurWorldinData chart about extreme poverty vs GDP per capita we look at the foundations of Data Visualisation techniques layer by layer. Further, this project also proposes 2 alternative representation for the original data to better understand the story behind the numbers."/>
  <meta property="og:locale" content="en_US"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="Behind the numbers: comparing extreme poverty and GDP per capita by world regions"/>
  <meta property="twitter:description" content="By recreating from group up a OurWorldinData chart about extreme poverty vs GDP per capita we look at the foundations of Data Visualisation techniques layer by layer. Further, this project also proposes 2 alternative representation for the original data to better understand the story behind the numbers."/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","categories","author","date","output"]}},"value":[{"type":"character","attributes":{},"value":["Behind the numbers: comparing extreme poverty and GDP per capita by world regions"]},{"type":"character","attributes":{},"value":["By recreating from group up a OurWorldinData chart about extreme poverty vs GDP per capita we look at the foundations of Data Visualisation techniques layer by layer. Further, this project also proposes 2 alternative representation for the original data to better understand the story behind the numbers. \n"]},{"type":"character","attributes":{},"value":["2024"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name"]}},"value":[{"type":"character","attributes":{},"value":["Mafalda González-González"]}]}]},{"type":"character","attributes":{},"value":["2025-01-17"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]}]}]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["100546612_files/anchor-4.2.2/anchor.min.js","100546612_files/bowser-1.9.3/bowser.min.js","100546612_files/colorbrewer-1/colorbrewer.css","100546612_files/colorbrewer-1/colorbrewer.js","100546612_files/colorbrewer-1/LICENSE.txt","100546612_files/d3-3.5.3/bower.json","100546612_files/d3-3.5.3/CONTRIBUTING.md","100546612_files/d3-3.5.3/d3.js","100546612_files/d3-3.5.3/d3.min.js","100546612_files/d3-3.5.3/LICENSE","100546612_files/distill-2.2.21/template.v2.js","100546612_files/figure-html5/axes custom grid-1.png","100546612_files/figure-html5/axes skeleton-1.png","100546612_files/figure-html5/basic line graph-1.png","100546612_files/figure-html5/initial graph-1.png","100546612_files/figure-html5/logo-1.png","100546612_files/figure-html5/replication-1.png","100546612_files/figure-html5/theme-1.png","100546612_files/figure-html5/titles-1.png","100546612_files/figure-html5/unnamed-chunk-1-1.png","100546612_files/figure-html5/unnamed-chunk-10-1.png","100546612_files/figure-html5/unnamed-chunk-10-2.png","100546612_files/figure-html5/unnamed-chunk-10-3.png","100546612_files/figure-html5/unnamed-chunk-11-1.png","100546612_files/figure-html5/unnamed-chunk-12-1.png","100546612_files/figure-html5/unnamed-chunk-13-1.png","100546612_files/figure-html5/unnamed-chunk-13-2.png","100546612_files/figure-html5/unnamed-chunk-14-1.png","100546612_files/figure-html5/unnamed-chunk-15-1.png","100546612_files/figure-html5/unnamed-chunk-15-2.png","100546612_files/figure-html5/unnamed-chunk-16-1.png","100546612_files/figure-html5/unnamed-chunk-17-1.png","100546612_files/figure-html5/unnamed-chunk-18-1.png","100546612_files/figure-html5/unnamed-chunk-19-1.png","100546612_files/figure-html5/unnamed-chunk-2-1.png","100546612_files/figure-html5/unnamed-chunk-3-1.png","100546612_files/figure-html5/unnamed-chunk-4-1.png","100546612_files/figure-html5/unnamed-chunk-6-1.png","100546612_files/figure-html5/unnamed-chunk-7-1.png","100546612_files/figure-html5/unnamed-chunk-8-1.png","100546612_files/figure-html5/unnamed-chunk-9-1.png","100546612_files/header-attrs-2.28/header-attrs.js","100546612_files/header-attrs-2.29/header-attrs.js","100546612_files/htmlwidgets-1.6.4/htmlwidgets.js","100546612_files/jquery-3.6.0/jquery-3.6.0.js","100546612_files/jquery-3.6.0/jquery-3.6.0.min.js","100546612_files/jquery-3.6.0/jquery-3.6.0.min.map","100546612_files/popper-2.6.0/popper.min.js","100546612_files/sass0a796f4839e3eb1a64fbc0cc43f9dfff/style.min.css","100546612_files/streamgraph-1/streamgraph.css","100546612_files/streamgraph-binding-0.9.0/streamgraph.js","100546612_files/tippy-6.2.7/tippy-bundle.umd.min.js","100546612_files/tippy-6.2.7/tippy-light-border.css","100546612_files/tippy-6.2.7/tippy.css","100546612_files/tippy-6.2.7/tippy.umd.min.js","100546612_files/webcomponents-2.0.0/webcomponents.js","data_filtered.rda","data_improvement.rda","GDP world.xlsx","Growth-and-poverty-since-1820.png","lib/colorbrewer-1/colorbrewer.css","lib/colorbrewer-1/colorbrewer.js","lib/colorbrewer-1/LICENSE.txt","lib/d3-3.5.3/bower.json","lib/d3-3.5.3/CONTRIBUTING.md","lib/d3-3.5.3/d3.js","lib/d3-3.5.3/d3.min.js","lib/d3-3.5.3/LICENSE","lib/htmlwidgets-1.6.4/htmlwidgets.js","lib/streamgraph-1/streamgraph.css","lib/streamgraph-binding-0.9.0/streamgraph.js","Our_World_in_Data_logo.png","poverty world.xlsx","replication.jpeg","replication.pdf","replication.png","story image 1.png","story image 2.png","streamgraph_combined_with_lines.html"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
    font-size: 100%;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  hr.section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    margin: 0px;
  }


  d-byline {
    border-top: none;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
    border-top: none;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  /* tweak for Pandoc numbered line within distill */
  d-article pre.numberSource code > span {
      left: -2em;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // separator
    var separator = '<hr class="section-separator" style="clear: both"/>';
    // prepend separator above appendix
    $('.d-byline').before(separator);
    $('.d-article').before(separator);

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme, except when numbering line
    // in code chunk
    $('pre:not(.numberLines) code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        var author_name = front_matter.authors[i].author
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', author_name ? 'ORCID ID for ' + author_name : 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        const citeChild = $(this).children()[0]
        // Do not process if @xyz has been used without escaping and without bibliography activated
        // https://github.com/rstudio/distill/issues/466
        if (citeChild === undefined) return true

        if (citeChild.nodeName == "D-FOOTNOTE") {
          var fn = citeChild
          $(this).html(fn.shadowRoot.querySelector("sup"))
          $(this).id = fn.id
          fn.remove()
        }
        var refs = $(this).attr('data-cites').split(" ");
        var refHtml = refs.map(function(ref) {
          // Could use CSS.escape too here, we insure backward compatibility in navigator
          return "<p>" + $('div[id="ref-' + ref + '"]').html() + "</p>";
        }).join("\n");
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // fix footnotes in tables (#411)
      // replacing broken distill.pub feature
      $('table d-footnote').each(function() {
        // we replace internal showAtNode methode which is triggered when hovering a footnote
        this.hoverBox.showAtNode = function(node) {
          // ported from https://github.com/distillpub/template/pull/105/files
          calcOffset = function(elem) {
              let x = elem.offsetLeft;
              let y = elem.offsetTop;
              // Traverse upwards until an `absolute` element is found or `elem`
              // becomes null.
              while (elem = elem.offsetParent && elem.style.position != 'absolute') {
                  x += elem.offsetLeft;
                  y += elem.offsetTop;
              }

              return { left: x, top: y };
          }
          // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop
          const bbox = node.getBoundingClientRect();
          const offset = calcOffset(node);
          this.show([offset.left + bbox.width, offset.top + bbox.height]);
        }
      })

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      // ignore leaflet img layers (#106)
      figures = figures.filter(':not(img[class*="leaflet"])')
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace(/^index[.]html/, "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <!--/radix_placeholder_distill-->
  <script src="100546612_files/header-attrs-2.29/header-attrs.js"></script>
  <script src="100546612_files/htmlwidgets-1.6.4/htmlwidgets.js"></script>
  <script src="100546612_files/d3-3.5.3/d3.min.js"></script>
  <link href="100546612_files/colorbrewer-1/colorbrewer.css" rel="stylesheet" />
  <script src="100546612_files/colorbrewer-1/colorbrewer.js"></script>
  <link href="100546612_files/streamgraph-1/streamgraph.css" rel="stylesheet" />
  <script src="100546612_files/streamgraph-binding-0.9.0/streamgraph.js"></script>
  <script src="100546612_files/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <script src="100546612_files/popper-2.6.0/popper.min.js"></script>
  <link href="100546612_files/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="100546612_files/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="100546612_files/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="100546612_files/anchor-4.2.2/anchor.min.js"></script>
  <script src="100546612_files/bowser-1.9.3/bowser.min.js"></script>
  <script src="100546612_files/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="100546612_files/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Behind the numbers: comparing extreme poverty and GDP per capita by world regions","description":"By recreating from group up a OurWorldinData chart about extreme poverty vs GDP per capita we look at the foundations of Data Visualisation techniques layer by layer. Further, this project also proposes 2 alternative representation for the original data to better understand the story behind the numbers.","authors":[{"author":"Mafalda González-González","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2025-01-17T00:00:00.000+01:00","citationText":"González-González, 2025"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Behind the numbers: comparing extreme poverty and GDP per capita by world regions</h1>

<!--radix_placeholder_categories-->
<div class="dt-tags">
<div class="dt-tag">2024</div>
</div>
<!--/radix_placeholder_categories-->
<p><p>By recreating from group up a OurWorldinData chart about extreme poverty vs GDP per capita we look at the foundations of Data Visualisation techniques layer by layer. Further, this project also proposes 2 alternative representation for the original data to better understand the story behind the numbers.</p></p>
</div>

<div class="d-byline">
  
  Mafalda González-González
  
<br/>2025-01-17
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#on-extreme-poverty-and-gdp" id="toc-on-extreme-poverty-and-gdp">On Extreme poverty and GDP</a></li>
<li><a href="#before-we-start" id="toc-before-we-start">Before we start…</a>
<ul>
<li><a href="#library-and-fonts" id="toc-library-and-fonts">Library and fonts</a></li>
<li><a href="#retrieving-and-tidying-the-data" id="toc-retrieving-and-tidying-the-data">Retrieving and tidying the data</a></li>
<li><a href="#cleaning-the-data" id="toc-cleaning-the-data">Cleaning the data</a></li>
</ul></li>
<li><a href="#replicating-the-original-graph" id="toc-replicating-the-original-graph">Replicating the original graph</a>
<ul>
<li><a href="#starting-point-facet_wrap-by-region-and-rough-approximation" id="toc-starting-point-facet_wrap-by-region-and-rough-approximation">Starting point: facet_wrap by region and rough approximation</a></li>
<li><a href="#dimensions-second-starting-point2" id="toc-dimensions-second-starting-point2">Dimensions: second starting point</a></li>
<li><a href="#axes-skeleton-and-custom-grid" id="toc-axes-skeleton-and-custom-grid">Axes skeleton and custom grid</a></li>
<li><a href="#theme" id="toc-theme">Theme</a></li>
<li><a href="#titles" id="toc-titles">Titles</a></li>
<li><a href="#annotations-and-descriptions" id="toc-annotations-and-descriptions">Annotations and Descriptions</a></li>
<li><a href="#logo" id="toc-logo">Logo</a></li>
</ul></li>
<li><a href="#comparison" id="toc-comparison">Comparison</a>
<ul>
<li><a href="#limitations" id="toc-limitations">Limitations</a></li>
<li><a href="#lessons" id="toc-lessons">Lessons</a></li>
</ul></li>
<li><a href="#improvement-possibilities" id="toc-improvement-possibilities">Improvement Possibilities</a>
<ul>
<li><a href="#the-original-graph" id="toc-the-original-graph">The original graph</a></li>
</ul></li>
<li><a href="#the-bare-naked-story" id="toc-the-bare-naked-story">The bare naked story</a>
<ul>
<li><a href="#processing-of-the-data" id="toc-processing-of-the-data">Processing of the data</a></li>
<li><a href="#creating-our-graph" id="toc-creating-our-graph">Creating our graph</a></li>
</ul></li>
<li><a href="#bare-naked-story-but-with-jewellery" id="toc-bare-naked-story-but-with-jewellery">Bare naked story, but with jewellery</a></li>
<li><a href="#gg-plot-it" id="toc-gg-plot-it">GG plot it</a></li>
</ul>
</nav>
</div>
<h2 id="on-extreme-poverty-and-gdp">On Extreme poverty and GDP</h2>
<p><a href="https://www.gapminder.org/questions/gms1-3/">When asked</a> if the world’s population living in extreme poverty has halved, stayed the same, or double in the last 20 years, about two thirds of respondents will say it has doubled – when, in fact, it has more than halved, which only one in in every ten person will guess. The misconception stems out our dichotomous perception of the social classes between rich and poor, all the while an overwhelming majority of people live in between those two extremes. The inaccurate negative understanding of this economic asymmetry brings us to two key points: firstly, we <em>believe that everything everywhere is becoming worse</em> which leads to, secondly, <em>diverting our attention away from the actual trends</em> at hand.</p>
<p><a href="https://ourworldindata.org/extreme-poverty-in-brief#article-citation">OurWorldinData</a> takes a closer look at the current developments in poverty. Particularly, they are interested in highlighting the necessity to differentiate between people living in poverty, and people living in <em>extreme poverty</em>, i.e. living on less than 2.15$ a day, as without this distinction we would not understand the crucial differences and trends in living standards within impoverished people. In the graph below we can observe how with this metric relates to the GDP of a country. Tackling out previously mentioned key points, we see the important share of wealth that has propelled many world regions out of extreme poverty in the last 200 years, and at the same time recognize which world regions have disproportionate percentages of extreme poverty in comparison to other regions. While it takes just a bit to understand the underlying relationship that OurWorldinData seeks to visualize, the point is that economic growth implies poverty decline, and stagnated economies imply higher poverty rates.</p>
<figure>
<img src="Growth-and-poverty-since-1820.png" class="external" style="width:100.0%" alt="Original graph sourced from Our World in Data." />
<figcaption aria-hidden="true">Original graph sourced from <a href="https://ourworldindata.org/extreme-poverty-in-brief#article-citation">Our World in Data</a>.</figcaption>
</figure>
<p>Hence, to quote Max Roser, the author of this graph and corresponding article, “what needs explanation is not poverty, but prosperity.” I find this point particularly intriguing, and will refer back to it in my proposal for the graph improvement. However, first let us take a look at the replication of the original</p>
<h2 id="before-we-start">Before we start…</h2>
<h3 id="library-and-fonts">Library and fonts</h3>
<p>To replicate the graph, the below packages and font families were used. The fonts were retrieved, for free, from Google Fonts. The libraries are commented within the chunks they started being used.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://readxl.tidyverse.org'>readxl</a></span><span class='op'>)</span> </span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://tidyverse.tidyverse.org'>tidyverse</a></span><span class='op'>)</span> </span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span> </span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://ggplot2.tidyverse.org'>ggplot2</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://forcats.tidyverse.org/'>forcats</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://wilkelab.org/ggtext/'>ggtext</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>grid</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># dowload fonts</span></span>
<span><span class='fu'>sysfonts</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/sysfonts/man/font_add_google.html'>font_add_google</a></span><span class='op'>(</span><span class='st'>"Playfair Display"</span>, family <span class='op'>=</span> <span class='st'>"playfair display"</span><span class='op'>)</span></span>
<span><span class='fu'>sysfonts</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/sysfonts/man/font_add_google.html'>font_add_google</a></span><span class='op'>(</span><span class='st'>"Lato"</span>, family <span class='op'>=</span> <span class='st'>"lato"</span><span class='op'>)</span></span>
<span><span class='fu'>sysfonts</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/sysfonts/man/font_add_google.html'>font_add_google</a></span><span class='op'>(</span><span class='st'>"Lato"</span>, family <span class='op'>=</span> <span class='st'>"lato_light"</span>, regular.wt<span class='op'>=</span><span class='fl'>300</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># activate fonts to use them with ggplot </span></span>
<span><span class='fu'>showtext</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/showtext/man/showtext_auto.html'>showtext_auto</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<h3 id="retrieving-and-tidying-the-data">Retrieving and tidying the data</h3>
<p>While OurWorldinData does normally provide a direct link to download the data used in their graphs, this specific one did not have such an option. While there is a newer, <a href="https://ourworldindata.org/grapher/the-share-of-people-living-in-extreme-poverty-vs-gdp-per-capita">updated version</a> of the graph, I decided to email directly the creator, Max Roser, who indicated me to the <a href="https://www.oecd.org/en/publications/how-was-life-volume-ii_3d96efc5-en/full-report/component-14.html#chapter-d1e59754">research done by the Organisation for Economic Co-operation and Development OECD</a>. It used to be that the tables with the information about extreme poverty and GDP trends were easily accessible, but now one has to scan the whole article and find the tables like a needle in a hay stack.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># library(readxl)</span></span>
<span><span class='va'>gdp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://readxl.tidyverse.org/reference/read_excel.html'>read_xlsx</a></span><span class='op'>(</span>path <span class='op'>=</span> <span class='st'>"GDP world.xlsx"</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>poverty</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://readxl.tidyverse.org/reference/read_excel.html'>read_xlsx</a></span><span class='op'>(</span>path <span class='op'>=</span> <span class='st'>"poverty world.xlsx"</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>We have two data sets: gdp, 21 observations (years from 1820-2016 in arbitrary increases) over 10 variables (YEAR + country regions), and poverty, with 13 observations (years from 1820-2016 in arbitrary increases) over 9 variables (YEAR + country regions). We will go over the differences below, when we clean the data. First, we will make it tidy adhering to the idea one variable should be stored in one column. Hence, as the column names represet regions, we <code>pivot_longer</code> to create in both data sets a new columns where the region and the metric (GDP or extreme poverty index) is indicated. Finally, we <code>full_join</code> the data sets together and make GDP a numerical variable without spaces. We obtain a tibble with 221 observations over 4 variables: YEAR, region, GDP and poverty.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># library(tidyverse) </span></span>
<span><span class='co'># library(dplyr) </span></span>
<span></span>
<span><span class='co'># gdp</span></span>
<span><span class='va'>gdp</span> <span class='op'>&lt;-</span> <span class='va'>gdp</span> <span class='op'>|&gt;</span> </span>
<span>  <span class='fu'><a href='https://tidyr.tidyverse.org/reference/pivot_longer.html'>pivot_longer</a></span><span class='op'>(</span></span>
<span>    cols <span class='op'>=</span> <span class='op'>-</span><span class='va'>YEAR</span>,        </span>
<span>    names_to <span class='op'>=</span> <span class='st'>"region"</span>,  </span>
<span>    values_to <span class='op'>=</span> <span class='st'>"GDP"</span>      </span>
<span>  <span class='op'>)</span></span>
<span></span>
<span><span class='co'># poverty</span></span>
<span><span class='va'>poverty</span> <span class='op'>&lt;-</span> <span class='va'>poverty</span> <span class='op'>|&gt;</span> </span>
<span>  <span class='fu'><a href='https://tidyr.tidyverse.org/reference/pivot_longer.html'>pivot_longer</a></span><span class='op'>(</span></span>
<span>    cols <span class='op'>=</span> <span class='op'>-</span><span class='va'>YEAR</span>,          </span>
<span>    names_to <span class='op'>=</span> <span class='st'>"region"</span>,  </span>
<span>    values_to <span class='op'>=</span> <span class='st'>"poverty"</span>  </span>
<span>  <span class='op'>)</span></span>
<span></span>
<span><span class='co'># combine</span></span>
<span><span class='va'>world</span> <span class='op'>&lt;-</span> <span class='va'>gdp</span> <span class='op'>|&gt;</span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>full_join</a></span><span class='op'>(</span><span class='va'>poverty</span>, by <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"YEAR"</span>, <span class='st'>"region"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>|&gt;</span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>GDP <span class='op'>=</span> <span class='fu'><a href='https://stringr.tidyverse.org/reference/str_remove.html'>str_remove_all</a></span><span class='op'>(</span><span class='va'>GDP</span>, pattern <span class='op'>=</span> <span class='st'>"\\s"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>|&gt;</span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>GDP <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='va'>GDP</span><span class='op'>)</span><span class='op'>)</span> </span>
<span></span>
<span><span class='va'>world</span></span></code></pre>
</div>
<pre><code># A tibble: 221 × 4
    YEAR region                         GDP poverty
   &lt;dbl&gt; &lt;chr&gt;                        &lt;dbl&gt;   &lt;dbl&gt;
 1  1820 Western Europe                2307      73
 2  1820 Eastern Europe                 818      91
 3  1820 Western Offshoots             2513      55
 4  1820 Latin America and Carribean    953      NA
 5  1820 East Asia                     1089      78
 6  1820 South and Southeast Asia)      929      NA
 7  1820 Middle East and North Africa   974      75
 8  1820 Sub-Saharan Africa             800      91
 9  1820 World                         1174      NA
10  1830 Western Europe                2384      NA
# ℹ 211 more rows</code></pre>
</div>
<h3 id="cleaning-the-data">Cleaning the data</h3>
<p>Cleaning the data posed itself as a tedious task due to various challenges. Firstly, as mentioned, the data sets differentiated each other by 8 observations and 1 variable. This is due to GDP having information (observations) during more years and having an extra region, “World,” that represents the global average.</p>
<p>The first, and easier task, was to <strong>clean the regions names</strong>, as some had been spelled differently in the different data set (“Latin America and Ca<u>rr</u>ibean” vs “Latin America and Cari<u>bb</u>ean” and “South and Southeast Asia” vs “South and Southeast Asia<strong>)</strong>”).</p>
<p>In hindsight, the simplest solution would have been to clean the names before merging the data sets. However, as one does learn from their mistakes, I have left my creative, but extremely unnecessarily complicated approach to the task at hand. The idea was to extract the data that contained the wrong names into a “phantom data set”, clean the names, merge the poverty and GDP information, and the re-join that phantom data set into the original data set.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># check name disparities</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>world</span><span class='op'>$</span><span class='va'>region</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code> [1] &quot;Western Europe&quot;               &quot;Eastern Europe&quot;              
 [3] &quot;Western Offshoots&quot;            &quot;Latin America and Carribean&quot; 
 [5] &quot;East Asia&quot;                    &quot;South and Southeast Asia)&quot;   
 [7] &quot;Middle East and North Africa&quot; &quot;Sub-Saharan Africa&quot;          
 [9] &quot;World&quot;                        &quot;Latin America and Caribbean&quot; 
[11] &quot;South and Southeast Asia&quot;    </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># clean South and Southeast Asia</span></span>
<span></span>
<span><span class='co'># create new data set </span></span>
<span><span class='va'>clean_southeast</span> <span class='op'>&lt;-</span> <span class='va'>world</span> <span class='op'>|&gt;</span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>region</span> <span class='op'><a href='https://rdrr.io/r/base/match.html'>%in%</a></span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"South and Southeast Asia"</span>, <span class='st'>"South and Southeast Asia)"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>|&gt;</span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>region <span class='op'>=</span> <span class='st'>"South and Southeast Asia"</span><span class='op'>)</span> <span class='op'>|&gt;</span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>YEAR</span>, region <span class='op'>=</span> <span class='st'>"South and Southeast Asia"</span><span class='op'>)</span> <span class='op'>|&gt;</span></span>
<span></span>
<span>  <span class='co'># select the first non-missing GDP or poverty value</span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span></span>
<span>    GDP <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/nth.html'>first</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/na.fail.html'>na.omit</a></span><span class='op'>(</span><span class='va'>GDP</span><span class='op'>)</span><span class='op'>)</span>,</span>
<span>    poverty <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/nth.html'>first</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/na.fail.html'>na.omit</a></span><span class='op'>(</span><span class='va'>poverty</span><span class='op'>)</span><span class='op'>)</span>,</span>
<span>    .groups <span class='op'>=</span> <span class='st'>"drop"</span></span>
<span>  <span class='op'>)</span></span>
<span></span>
<span><span class='co'># remove the region from the original dataset </span></span>
<span><span class='va'>world</span> <span class='op'>&lt;-</span> <span class='va'>world</span> <span class='op'>|&gt;</span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='va'>region</span> <span class='op'><a href='https://rdrr.io/r/base/match.html'>%in%</a></span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"South and Southeast Asia"</span>, </span>
<span>                          <span class='st'>"South and Southeast Asia)"</span><span class='op'>)</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>clean_world</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/bind_rows.html'>bind_rows</a></span><span class='op'>(</span><span class='va'>world</span>, <span class='va'>clean_southeast</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>world</span> <span class='op'>&lt;-</span> <span class='va'>clean_world</span></span>
<span></span>
<span><span class='co'># clean Latin America and Caribbean</span></span>
<span></span>
<span><span class='va'>clean_latin</span> <span class='op'>&lt;-</span> <span class='va'>world</span> <span class='op'>|&gt;</span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>region</span> <span class='op'><a href='https://rdrr.io/r/base/match.html'>%in%</a></span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Latin America and Carribean"</span>, <span class='st'>"Latin America and Caribbean"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>|&gt;</span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>region <span class='op'>=</span> <span class='st'>"Latin America and Caribbean"</span><span class='op'>)</span> <span class='op'>|&gt;</span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>YEAR</span>, region <span class='op'>=</span> <span class='st'>"Latin America and Caribbean"</span><span class='op'>)</span> <span class='op'>|&gt;</span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span></span>
<span>    GDP <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/nth.html'>first</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/na.fail.html'>na.omit</a></span><span class='op'>(</span><span class='va'>GDP</span><span class='op'>)</span><span class='op'>)</span>,</span>
<span>    poverty <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/nth.html'>first</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/na.fail.html'>na.omit</a></span><span class='op'>(</span><span class='va'>poverty</span><span class='op'>)</span><span class='op'>)</span>,</span>
<span>    .groups <span class='op'>=</span> <span class='st'>"drop"</span></span>
<span>  <span class='op'>)</span></span>
<span></span>
<span><span class='va'>world</span> <span class='op'>&lt;-</span> <span class='va'>world</span> <span class='op'>|&gt;</span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='va'>region</span> <span class='op'><a href='https://rdrr.io/r/base/match.html'>%in%</a></span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Latin America and Carribean"</span>, </span>
<span>                        <span class='st'>"Latin America and Caribbean"</span><span class='op'>)</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>clean_world</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/bind_rows.html'>bind_rows</a></span><span class='op'>(</span><span class='va'>world</span>, <span class='va'>clean_latin</span><span class='op'>)</span></span>
<span><span class='va'>world</span> <span class='op'>&lt;-</span> <span class='va'>clean_world</span></span></code></pre>
</div>
</div>
<p>The second, also easy, task was to <strong>rename</strong> the “Western Offshoots” as our goal regions “Australia, New Zealand, USA and Canada” and World as “Global Average.” This was not strictly necessary as the annotations of the regions in the final graph will be done manually, but it did improve clarity during the replication process.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># recode names </span></span>
<span></span>
<span><span class='va'>world</span> <span class='op'>&lt;-</span> <span class='va'>world</span> <span class='op'>|&gt;</span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>region <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/recode.html'>recode</a></span><span class='op'>(</span><span class='va'>region</span>,</span>
<span>                         <span class='st'>"Western Offshoots"</span> <span class='op'>=</span> </span>
<span>                           <span class='st'>"Australia, New Zealand, USA and Canada"</span><span class='op'>)</span>, </span>
<span>         region <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/recode.html'>recode</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='st'>"World"</span> <span class='op'>=</span> <span class='st'>"Global Average"</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>Finally, the last, and most time-consuming step in the cleaning process was <strong>supplementing the data</strong>. The hardship with this step was not its execution per se, but figuring out which data to use for the supplementation. The original article that provided the excel tables about the world GDP and poverty trends also included tables with information about 25 countries in both these metrics. Therefore, different questions arose: does GDP need supplementation, as it already has some information for its “Global Average” region? Is the supplementation done with the means of the observations out of 25 countries? Or with the means of the observations of the countries already grouped in regions? Or maybe a mix of both? These questions were answered by trial and error, as OurWorldinData had given me no information thereof nor was there any to find in the original source. Hence, I tried different approaches and looked at its impact in later stages of the replication process. It seemed to me that <u>the mean of the world regions had been used for supplementing the observations both for poverty and GDP</u>, while excluding the already existing GDP information for the calculation of the average of the regions.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># calculate means for GDP and poverty by YEAR, excluding "World"</span></span>
<span><span class='va'>world_mean</span> <span class='op'>&lt;-</span> <span class='va'>world</span> <span class='op'>|&gt;</span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>region</span> <span class='op'>!=</span> <span class='st'>"Global Average"</span><span class='op'>)</span> <span class='op'>|&gt;</span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>YEAR</span><span class='op'>)</span> <span class='op'>|&gt;</span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span> <span class='co'># create means in new columns </span></span>
<span>    avg_poverty <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>poverty</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>, </span>
<span>    avg_gdp <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>GDP</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>, </span>
<span>    .groups <span class='op'>=</span> <span class='st'>"drop"</span></span>
<span>  <span class='op'>)</span></span>
<span></span>
<span><span class='co'># supplementing "Global Average" region</span></span>
<span><span class='va'>world_supplemented</span> <span class='op'>&lt;-</span> <span class='va'>world</span> <span class='op'>|&gt;</span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>left_join</a></span><span class='op'>(</span><span class='va'>world_mean</span>, by <span class='op'>=</span> <span class='st'>"YEAR"</span><span class='op'>)</span> <span class='op'>|&gt;</span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span> <span class='co'># add means if they are missing (important for GDP!)</span></span>
<span>    poverty <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/if_else.html'>if_else</a></span><span class='op'>(</span></span>
<span>      <span class='va'>region</span> <span class='op'>==</span> <span class='st'>"Global Average"</span> <span class='op'>&amp;</span> <span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>poverty</span><span class='op'>)</span>, </span>
<span>      <span class='va'>avg_poverty</span>, </span>
<span>      <span class='va'>poverty</span><span class='op'>)</span>,</span>
<span>    GDP <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/if_else.html'>if_else</a></span><span class='op'>(</span></span>
<span>      <span class='va'>region</span> <span class='op'>==</span> <span class='st'>"Global Average"</span> <span class='op'>&amp;</span> <span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>GDP</span><span class='op'>)</span>, </span>
<span>      <span class='va'>avg_gdp</span>, </span>
<span>      <span class='va'>GDP</span><span class='op'>)</span></span>
<span>  <span class='op'>)</span> <span class='op'>|&gt;</span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='op'>-</span><span class='va'>avg_poverty</span>, <span class='op'>-</span><span class='va'>avg_gdp</span><span class='op'>)</span>  <span class='co'># remove temporary average columns</span></span>
<span></span>
<span><span class='va'>world</span> <span class='op'>&lt;-</span> <span class='va'>world_supplemented</span></span>
<span></span>
<span><span class='va'>world</span> <span class='op'>|&gt;</span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>region</span> <span class='op'>==</span> <span class='st'>"Global Average"</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code># A tibble: 21 × 4
    YEAR region           GDP poverty
   &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;   &lt;dbl&gt;
 1  1820 Global Average 1174     77.1
 2  1830 Global Average 1663    NaN  
 3  1840 Global Average 1744.   NaN  
 4  1850 Global Average 1225     72  
 5  1860 Global Average 2548.   NaN  
 6  1870 Global Average 1498     69.1
 7  1880 Global Average 3830    NaN  
 8  1890 Global Average 3078.   NaN  
 9  1900 Global Average 2212     57.4
10  1910 Global Average 4022    NaN  
# ℹ 11 more rows</code></pre>
</div>
<p>There are still some years of the poverty index that have no information, these correspond to the years that existed in the GDP data set but not in the poverty data set.</p>
<h2 id="replicating-the-original-graph">Replicating the original graph</h2>
<p>The replication process consisted in roughly approximating my way towards the indications of the original graph, and then fine tuning details as possible and necessary. It involved:</p>
<ul>
<li>Basic starting point: facet_wrap by region and rough approximation</li>
<li>Dimensions: second starting point</li>
<li>Axes skeleton and custom grid</li>
<li>Titles</li>
<li>Annotations</li>
<li>Logo</li>
</ul>
<h3 id="starting-point-facet_wrap-by-region-and-rough-approximation">Starting point: facet_wrap by region and rough approximation</h3>
<p>To understand how the data behaves the first step is to create <strong>simple line graphs</strong> with <code>geom_path</code> that are separated by regions through <code>facet_wrap</code>. Even though small, this step was crucial as originally my intention had been to create a graph of one region to understand the dimensions of the individual graphs and then replicate it for all 9 regions in order to have more control over fine details. However, it was more practical to actually create the skeletons of all graphs at the same time, and at the end add the details to the totality of the facet_wrap.</p>
<p>This basic graph incorporates GDP in the x axis, poverty in the y axis and region into the colors in the <code>aesthetic</code> options. We use a <code>Log scale</code> for GDP, as in the original the x axis is not divided in equal spaces, and a <code>continuous scale</code> for the y axis, which already incorporates percentages in the labels.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># library(ggplot2)</span></span>
<span><span class='va'>plot_basic</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>world</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>GDP</span>, y <span class='op'>=</span> <span class='va'>poverty</span>, color <span class='op'>=</span> <span class='va'>region</span><span class='op'>)</span> <span class='op'>+</span> </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_x_log10</a></span><span class='op'>(</span>labels <span class='op'>=</span> <span class='fu'>scales</span><span class='fu'>::</span><span class='va'><a href='https://scales.r-lib.org/reference/comma.html'>comma</a></span><span class='op'>)</span> <span class='op'>+</span>  <span class='co'># log scale for GDP</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_y_continuous</a></span><span class='op'>(</span>labels <span class='op'>=</span> <span class='fu'>scales</span><span class='fu'>::</span><span class='fu'><a href='https://scales.r-lib.org/reference/percent_format.html'>percent_format</a></span><span class='op'>(</span>scale <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>  <span class='co'># percentage for poverty</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_path</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_wrap.html'>facet_wrap</a></span><span class='op'>(</span><span class='op'>~</span> <span class='va'>region</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>plot_basic</span></span></code></pre>
</div>
<p><img src="100546612_files/figure-html5/basic%20line%20graph-1.png" width="624" /></p>
</div>
<p>From this basic facet_wrap we can see that we are not done with the processing of the data.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> The lines of each region do not follow the total <strong>pattern of the original graph</strong>. After trial and error I found out that the problem was in how <code>geom_path</code> worked with missing values. The solution is to exclude all <code>NAs</code> even though we might be losing information on GDP.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>data_filtered</span> <span class='op'>&lt;-</span> <span class='va'>world</span> <span class='op'>|&gt;</span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>poverty</span><span class='op'>)</span> <span class='op'>&amp;</span> <span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>GDP</span><span class='op'>)</span><span class='op'>)</span> </span></code></pre>
</div>
</div>
<p>We also include now the <strong>background lines</strong> of each of the panels. For this, we duplicate the data set and create a second variable of region, “<code>region2</code>”, deleting the original one.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>data_filtered_2</span> <span class='op'>&lt;-</span> <span class='va'>data_filtered</span> <span class='op'>|&gt;</span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>region2 <span class='op'>=</span> <span class='va'>region</span>, region <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span> </span></code></pre>
</div>
</div>
<p>The lines will be inserted with <code>geom_path</code> indicating our new data set, its x and y axis, and colours, and including a lower alpha to make them appear in the background.</p>
<p>In addition, we can order the <strong>regions</strong> by <code>factoring</code> them so that they appear as in the original graph, and create a <code>colour scheme data set</code>. The colours were matched by using the colour eyedropper tool of Google docs.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># library(forcats)</span></span>
<span></span>
<span><span class='co'># order countries</span></span>
<span><span class='va'>data_filtered</span> <span class='op'>&lt;-</span> <span class='va'>data_filtered</span> <span class='op'>|&gt;</span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>region <span class='op'>=</span> <span class='fu'><a href='https://forcats.tidyverse.org/reference/fct_relevel.html'>fct_relevel</a></span><span class='op'>(</span><span class='va'>region</span>,</span>
<span>    <span class='st'>"Global Average"</span>,</span>
<span>    <span class='st'>"Western Europe"</span>,</span>
<span>    <span class='st'>"Australia, New Zealand, USA and Canada"</span>,</span>
<span>    <span class='st'>"Middle East and North Africa"</span>,</span>
<span>    <span class='st'>"Eastern Europe"</span>,</span>
<span>    <span class='st'>"Sub-Saharan Africa"</span>,</span>
<span>    <span class='st'>"East Asia"</span>,</span>
<span>    <span class='st'>"South and Southeast Asia"</span>,</span>
<span>    <span class='st'>"Latin America and Caribbean"</span></span>
<span>  <span class='op'>)</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># create colour scheme</span></span>
<span><span class='va'>colour_scheme</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Global Average"</span> <span class='op'>=</span> <span class='st'>"#840037"</span>,</span>
<span>                   <span class='st'>"Western Europe"</span> <span class='op'>=</span> <span class='st'>"#203558"</span>,</span>
<span>                   <span class='st'>"Australia, New Zealand, USA and Canada"</span> <span class='op'>=</span> <span class='st'>"#3f3386"</span>,</span>
<span>                   <span class='st'>"Middle East and North Africa"</span> <span class='op'>=</span> <span class='st'>"#845100"</span>,</span>
<span>                   <span class='st'>"Eastern Europe"</span> <span class='op'>=</span> <span class='st'>"#057ea1"</span>,</span>
<span>                   <span class='st'>"Sub-Saharan Africa"</span> <span class='op'>=</span> <span class='st'>"#951c73"</span>,</span>
<span>                   <span class='st'>"East Asia"</span> <span class='op'>=</span> <span class='st'>"#30918d"</span>,</span>
<span>                   <span class='st'>"South and Southeast Asia"</span> <span class='op'>=</span> <span class='st'>"#e0902f"</span>,</span>
<span>                   <span class='st'>"Latin America and Caribbean"</span> <span class='op'>=</span> <span class='st'>"#d54c3f"</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>Finally, we also <strong>start to approximate the</strong> <strong>theme</strong> by taking away the legends, labs and individual graph titles as in the original graph, and including a minimal theme to provide us with a background similar to the original one.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>plot_initial</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>data_filtered</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>GDP</span>, y <span class='op'>=</span> <span class='va'>poverty</span>, color <span class='op'>=</span> <span class='va'>region</span><span class='op'>)</span> <span class='op'>+</span> </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_x_log10</a></span><span class='op'>(</span>labels <span class='op'>=</span> <span class='fu'>scales</span><span class='fu'>::</span><span class='va'><a href='https://scales.r-lib.org/reference/comma.html'>comma</a></span><span class='op'>)</span> <span class='op'>+</span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_y_continuous</a></span><span class='op'>(</span>labels <span class='op'>=</span> <span class='fu'>scales</span><span class='fu'>::</span><span class='fu'><a href='https://scales.r-lib.org/reference/percent_format.html'>percent_format</a></span><span class='op'>(</span>scale <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='co'># colour of lines </span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_color_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='va'>colour_scheme</span><span class='op'>)</span> <span class='op'>+</span> </span>
<span>  </span>
<span>  <span class='co'># background lines</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_path</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>data_filtered_2</span>,</span>
<span>            <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>GDP</span>, y <span class='op'>=</span> <span class='va'>poverty</span>, </span>
<span>                group <span class='op'>=</span> <span class='va'>region2</span>, </span>
<span>                color <span class='op'>=</span> <span class='va'>region2</span><span class='op'>)</span>, </span>
<span>            alpha <span class='op'>=</span> <span class='fl'>0.2</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_path</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_wrap.html'>facet_wrap</a></span><span class='op'>(</span><span class='op'>~</span> <span class='va'>region</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='co'># theme: removing legend, x and y labs, titles</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span></span>
<span>    legend.position <span class='op'>=</span> <span class='st'>"none"</span>, </span>
<span>    strip.text <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span>,</span>
<span>    axis.title <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>plot_initial</span></span></code></pre>
</div>
<p><img src="100546612_files/figure-html5/initial%20graph-1.png" width="624" /></p>
</div>
<h3 id="dimensions-second-starting-point2">Dimensions: second starting point<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></h3>
<p>Before continuing with the actual replication, it is important that we take a moment to note the importance of <strong>dimensions</strong> for the final output. For the recreating of this tutorial, now would be a good time to decide your dimensions: the proportional width and height, as well as the quality of the final figure.</p>
<p>When choosing dpi its important to consider that the higher the dpi, the smaller the picture and thus the bigger the sizes for e.g. annotations.</p>
<p>The dimensions I originally chose for a full screen presentations included dpi (dots per inch) = 300, but for the purposes of this post dpi = 150 is enough. Still, the changes for higher dpi dimensions are included in the commends of the graph.</p>
<p>The dimensions for this post are:</p>
<p><code>{r, layout="l-body-outset", fig.width = 8, fig.height = 5.8, fig.dpi = 150}</code></p>
<h3 id="axes-skeleton-and-custom-grid">Axes skeleton and custom grid</h3>
<p>Having done an initial version of the graph and chosen our dimensions, we set out now to come closer to the details of the original. We <strong>adjust the x and y scales</strong> to match the original <code>breaks</code>, set the minor_breaks to NULL and adjust the <code>labels</code> of the guides, $ and no decimal mark for the x scale and % for the y scale.</p>
<p>The original graph’s x axis <code>limits</code> does not start at 0 or end at the 50000 break, but rather starts and ends a bit later. Thus, we set the scales within facet_wrap free and manually determine the limits within each scale. The x axis limits apparently start at 800 (which is the minimum value of the GDP values) and seem to end at somewhere around 57000 (trial and error considering the logarithmic scale).</p>
<aside>
Explanation: even though we have set the scales free for all panels as a group in the <code>facet_wrap</code>, we have also pre-defined the scales for all panels individually in <code>scale_x_log10</code> and <code>scale_y_continuous</code>.
</aside>
<div class="layout-chunk" data-layout="l-body-outset">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>plot_axes</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>data_filtered</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>GDP</span>, y <span class='op'>=</span> <span class='va'>poverty</span>, color <span class='op'>=</span> <span class='va'>region</span><span class='op'>)</span> <span class='op'>+</span> </span>
<span></span>
<span>  <span class='co'># x axis: breaks + guide details ($, .) + limits </span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_x_log10</a></span><span class='op'>(</span>breaks <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1000</span>, <span class='fl'>2000</span>, <span class='fl'>5000</span>, <span class='fl'>10000</span>, <span class='fl'>20000</span>, <span class='fl'>50000</span><span class='op'>)</span>,</span>
<span>                minor_breaks <span class='op'>=</span> <span class='cn'>NULL</span>,</span>
<span>                labels <span class='op'>=</span> <span class='fu'>scales</span><span class='fu'>::</span><span class='fu'><a href='https://scales.r-lib.org/reference/label_number.html'>label_number</a></span><span class='op'>(</span></span>
<span>                  big.mark <span class='op'>=</span> <span class='st'>"."</span>,prefix <span class='op'>=</span> <span class='st'>"$"</span>, decimal.mark <span class='op'>=</span> <span class='st'>"none"</span><span class='op'>)</span>,</span>
<span>                limits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>800</span>, <span class='fl'>57000</span><span class='op'>)</span> </span>
<span>                <span class='op'>)</span> <span class='op'>+</span> </span>
<span>  </span>
<span>  <span class='co'># y axis: breaks + guide details (%) + limits </span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_y_continuous</a></span><span class='op'>(</span>breaks <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>25</span>, <span class='fl'>50</span>, <span class='fl'>75</span>, <span class='fl'>100</span><span class='op'>)</span>,</span>
<span>                     minor_breaks <span class='op'>=</span> <span class='cn'>NULL</span>,</span>
<span>                     labels <span class='op'>=</span> <span class='fu'>scales</span><span class='fu'>::</span><span class='fu'><a href='https://scales.r-lib.org/reference/percent_format.html'>percent_format</a></span><span class='op'>(</span>scale <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>,</span>
<span>                     limits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>100</span><span class='op'>)</span></span>
<span>                     <span class='op'>)</span> <span class='op'>+</span></span>
<span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_color_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='va'>colour_scheme</span><span class='op'>)</span> <span class='op'>+</span> </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_path</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>data_filtered_2</span>,</span>
<span>            <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>GDP</span>, y <span class='op'>=</span> <span class='va'>poverty</span>, </span>
<span>                group <span class='op'>=</span> <span class='va'>region2</span>, </span>
<span>                color <span class='op'>=</span> <span class='va'>region2</span><span class='op'>)</span>, </span>
<span>            alpha <span class='op'>=</span> <span class='fl'>0.2</span>, </span>
<span>            linewidth <span class='op'>=</span> <span class='fl'>0.25</span><span class='op'>)</span> <span class='op'>+</span> <span class='co'># adjusted for new parameter</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_path</a></span><span class='op'>(</span>linewidth <span class='op'>=</span> <span class='fl'>0.35</span><span class='op'>)</span> <span class='op'>+</span> <span class='co'># adjusted for new parameter</span></span>
<span>  </span>
<span>  <span class='co'># free scales</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_wrap.html'>facet_wrap</a></span><span class='op'>(</span><span class='op'>~</span> <span class='va'>region</span>, scales <span class='op'>=</span> <span class='st'>"free"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span></span>
<span>    legend.position <span class='op'>=</span> <span class='st'>"none"</span>, </span>
<span>    strip.text <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span>,</span>
<span>    axis.title <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span>, </span>
<span>    <span class='op'>)</span></span>
<span></span>
<span><span class='va'>plot_axes</span></span></code></pre>
</div>
<p><img src="100546612_files/figure-html5/axes%20skeleton-1.png" width="1200" /></p>
</div>
<p>With correct axis scales we can now create <strong>custom grid lines</strong> with <code>geom_segment</code> to recreate the appearance, type and colour of the original ones. It would be an option to instead change the specifications in <code>panel.grid.major</code> within the <code>theme</code>. However <code>geom_segment</code> gives us more flexibility as not all y axis grid lines are of the same type in the original graph. Specifically, we want the first and last line, at 0% and 100%, of the y axis to be solid instead of dashed. Note that we also remove ggplot’s default grid lines in the theme section.</p>
<aside>
Caution! Because we are currently layering two plots on top of each other, the custom grid lines appear on top of our geom_path lines due to the order of commands.
</aside>
<div class="layout-chunk" data-layout="l-body-outset">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>plot_grid</span> <span class='op'>&lt;-</span> <span class='va'>plot_axes</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='co'># x axis grid lines (vertical lines)</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_segment.html'>geom_segment</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>1000</span>, xend <span class='op'>=</span> <span class='fl'>1000</span>, y <span class='op'>=</span> <span class='fl'>0</span>, yend <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span>, </span>
<span>                     linetype <span class='op'>=</span> <span class='st'>"21"</span>, linewidth <span class='op'>=</span> <span class='fl'>0.30</span>, color <span class='op'>=</span> <span class='st'>"#ebebeb"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_segment.html'>geom_segment</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>2000</span>, xend <span class='op'>=</span> <span class='fl'>2000</span>, y <span class='op'>=</span> <span class='fl'>0</span>, yend <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span>, </span>
<span>               linetype <span class='op'>=</span> <span class='st'>"21"</span>, linewidth <span class='op'>=</span> <span class='fl'>0.30</span>, color <span class='op'>=</span> <span class='st'>"#ebebeb"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_segment.html'>geom_segment</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>5000</span>, xend <span class='op'>=</span> <span class='fl'>5000</span>, y <span class='op'>=</span> <span class='fl'>0</span>, yend <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span>,</span>
<span>               linetype <span class='op'>=</span> <span class='st'>"21"</span>, linewidth <span class='op'>=</span> <span class='fl'>0.30</span>, color <span class='op'>=</span> <span class='st'>"#ebebeb"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_segment.html'>geom_segment</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>10000</span>, xend <span class='op'>=</span> <span class='fl'>10000</span>, y <span class='op'>=</span> <span class='fl'>0</span>, yend <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span>, </span>
<span>               linetype <span class='op'>=</span> <span class='st'>"21"</span>, linewidth <span class='op'>=</span> <span class='fl'>0.30</span>, color <span class='op'>=</span> <span class='st'>"#ebebeb"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_segment.html'>geom_segment</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>20000</span>, xend <span class='op'>=</span> <span class='fl'>20000</span>, y <span class='op'>=</span> <span class='fl'>0</span>, yend <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span>, </span>
<span>               linetype <span class='op'>=</span> <span class='st'>"21"</span>, linewidth <span class='op'>=</span> <span class='fl'>0.30</span>, color <span class='op'>=</span> <span class='st'>"#ebebeb"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_segment.html'>geom_segment</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>50000</span>, xend <span class='op'>=</span> <span class='fl'>50000</span>, y <span class='op'>=</span> <span class='fl'>0</span>, yend <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span>, </span>
<span>               linetype <span class='op'>=</span> <span class='st'>"21"</span>, linewidth <span class='op'>=</span> <span class='fl'>0.30</span>, color <span class='op'>=</span> <span class='st'>"#ebebeb"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span></span>
<span>  <span class='co'># y axis grid lines (horizontal lines): </span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_segment.html'>geom_segment</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>800</span>, xend <span class='op'>=</span> <span class='fl'>57000</span>, y <span class='op'>=</span> <span class='fl'>0</span>, yend <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span>, </span>
<span>               linetype <span class='op'>=</span> <span class='st'>"solid"</span>, linewidth <span class='op'>=</span> <span class='fl'>0.22</span>, color <span class='op'>=</span> <span class='st'>"#aeaeae"</span><span class='op'>)</span> <span class='op'>+</span> </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_segment.html'>geom_segment</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>800</span>, xend <span class='op'>=</span> <span class='fl'>57000</span>, y <span class='op'>=</span> <span class='fl'>25</span>, yend <span class='op'>=</span> <span class='fl'>25</span><span class='op'>)</span>, </span>
<span>               linetype <span class='op'>=</span> <span class='st'>"21"</span>, linewidth <span class='op'>=</span> <span class='fl'>0.30</span>, color <span class='op'>=</span> <span class='st'>"#ebebeb"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_segment.html'>geom_segment</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>800</span>, xend <span class='op'>=</span> <span class='fl'>57000</span>, y <span class='op'>=</span> <span class='fl'>50</span>, yend <span class='op'>=</span> <span class='fl'>50</span><span class='op'>)</span>, </span>
<span>               linetype <span class='op'>=</span> <span class='st'>"21"</span>, linewidth <span class='op'>=</span> <span class='fl'>0.30</span>, color <span class='op'>=</span> <span class='st'>"#ebebeb"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_segment.html'>geom_segment</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>800</span>, xend <span class='op'>=</span> <span class='fl'>57000</span>, y <span class='op'>=</span> <span class='fl'>75</span>, yend <span class='op'>=</span> <span class='fl'>75</span><span class='op'>)</span>, </span>
<span>               linetype <span class='op'>=</span> <span class='st'>"21"</span>, linewidth <span class='op'>=</span> <span class='fl'>0.30</span>, color <span class='op'>=</span> <span class='st'>"#ebebeb"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_segment.html'>geom_segment</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>800</span>, xend <span class='op'>=</span> <span class='fl'>57000</span>, y <span class='op'>=</span> <span class='fl'>100</span>, yend <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span>, </span>
<span>               linetype <span class='op'>=</span> <span class='st'>"solid"</span>, linewidth <span class='op'>=</span> <span class='fl'>0.22</span>, color <span class='op'>=</span> <span class='st'>"#aeaeae"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span></span>
<span>    legend.position <span class='op'>=</span> <span class='st'>"none"</span>, </span>
<span>    strip.text <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span>,</span>
<span>    axis.title <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span>, </span>
<span>    </span>
<span>    <span class='co'># removing ggplot's default grid lines </span></span>
<span>    panel.grid.major <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span>,</span>
<span>    <span class='op'>)</span></span>
<span></span>
<span><span class='va'>plot_grid</span></span></code></pre>
</div>
<p><img src="100546612_files/figure-html5/axes%20custom%20grid-1.png" width="1200" /></p>
</div>
<h3 id="theme">Theme</h3>
<p>The next step is to <strong>replicate with exactitude the theme</strong> of the panels of the original graph. For this, we change the background of the panels, expand the panels scales so that the have space for the guides’ labels and at the same time move the guides’ labels within the panels, adjust the between-panel spacing and set the family, colour and size of our labels.</p>
<p>In this step we set different <code>hjust</code> for the x axis guides as the “50000” in the original graph is slightly to the left. This makes ggplot plot the text bolder, which we take into consideration by setting its colour lighter than from the guides of the y axis.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>plot_theme</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>data_filtered</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>GDP</span>, y <span class='op'>=</span> <span class='va'>poverty</span>, color <span class='op'>=</span> <span class='va'>region</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_segment.html'>geom_segment</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>1000</span>, xend <span class='op'>=</span> <span class='fl'>1000</span>, y <span class='op'>=</span> <span class='fl'>0</span>, yend <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span>, </span>
<span>                     linetype <span class='op'>=</span> <span class='st'>"21"</span>, linewidth <span class='op'>=</span> <span class='fl'>0.30</span>, color <span class='op'>=</span> <span class='st'>"#ebebeb"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_segment.html'>geom_segment</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>2000</span>, xend <span class='op'>=</span> <span class='fl'>2000</span>, y <span class='op'>=</span> <span class='fl'>0</span>, yend <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span>, </span>
<span>               linetype <span class='op'>=</span> <span class='st'>"21"</span>, linewidth <span class='op'>=</span> <span class='fl'>0.30</span>, color <span class='op'>=</span> <span class='st'>"#ebebeb"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_segment.html'>geom_segment</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>5000</span>, xend <span class='op'>=</span> <span class='fl'>5000</span>, y <span class='op'>=</span> <span class='fl'>0</span>, yend <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span>,</span>
<span>               linetype <span class='op'>=</span> <span class='st'>"21"</span>, linewidth <span class='op'>=</span> <span class='fl'>0.30</span>, color <span class='op'>=</span> <span class='st'>"#ebebeb"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_segment.html'>geom_segment</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>10000</span>, xend <span class='op'>=</span> <span class='fl'>10000</span>, y <span class='op'>=</span> <span class='fl'>0</span>, yend <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span>, </span>
<span>               linetype <span class='op'>=</span> <span class='st'>"21"</span>, linewidth <span class='op'>=</span> <span class='fl'>0.30</span>, color <span class='op'>=</span> <span class='st'>"#ebebeb"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_segment.html'>geom_segment</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>20000</span>, xend <span class='op'>=</span> <span class='fl'>20000</span>, y <span class='op'>=</span> <span class='fl'>0</span>, yend <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span>, </span>
<span>               linetype <span class='op'>=</span> <span class='st'>"21"</span>, linewidth <span class='op'>=</span> <span class='fl'>0.30</span>, color <span class='op'>=</span> <span class='st'>"#ebebeb"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_segment.html'>geom_segment</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>50000</span>, xend <span class='op'>=</span> <span class='fl'>50000</span>, y <span class='op'>=</span> <span class='fl'>0</span>, yend <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span>, </span>
<span>               linetype <span class='op'>=</span> <span class='st'>"21"</span>, linewidth <span class='op'>=</span> <span class='fl'>0.30</span>, color <span class='op'>=</span> <span class='st'>"#ebebeb"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_segment.html'>geom_segment</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>800</span>, xend <span class='op'>=</span> <span class='fl'>57000</span>, y <span class='op'>=</span> <span class='fl'>0</span>, yend <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span>, </span>
<span>               linetype <span class='op'>=</span> <span class='st'>"solid"</span>, linewidth <span class='op'>=</span> <span class='fl'>0.22</span>, color <span class='op'>=</span> <span class='st'>"#aeaeae"</span><span class='op'>)</span> <span class='op'>+</span> </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_segment.html'>geom_segment</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>800</span>, xend <span class='op'>=</span> <span class='fl'>57000</span>, y <span class='op'>=</span> <span class='fl'>25</span>, yend <span class='op'>=</span> <span class='fl'>25</span><span class='op'>)</span>, </span>
<span>               linetype <span class='op'>=</span> <span class='st'>"21"</span>, linewidth <span class='op'>=</span> <span class='fl'>0.30</span>, color <span class='op'>=</span> <span class='st'>"#ebebeb"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_segment.html'>geom_segment</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>800</span>, xend <span class='op'>=</span> <span class='fl'>57000</span>, y <span class='op'>=</span> <span class='fl'>50</span>, yend <span class='op'>=</span> <span class='fl'>50</span><span class='op'>)</span>, </span>
<span>               linetype <span class='op'>=</span> <span class='st'>"21"</span>, linewidth <span class='op'>=</span> <span class='fl'>0.30</span>, color <span class='op'>=</span> <span class='st'>"#ebebeb"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_segment.html'>geom_segment</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>800</span>, xend <span class='op'>=</span> <span class='fl'>57000</span>, y <span class='op'>=</span> <span class='fl'>75</span>, yend <span class='op'>=</span> <span class='fl'>75</span><span class='op'>)</span>, </span>
<span>               linetype <span class='op'>=</span> <span class='st'>"21"</span>, linewidth <span class='op'>=</span> <span class='fl'>0.30</span>, color <span class='op'>=</span> <span class='st'>"#ebebeb"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_segment.html'>geom_segment</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>800</span>, xend <span class='op'>=</span> <span class='fl'>57000</span>, y <span class='op'>=</span> <span class='fl'>100</span>, yend <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span>, </span>
<span>               linetype <span class='op'>=</span> <span class='st'>"solid"</span>, linewidth <span class='op'>=</span> <span class='fl'>0.22</span>, color <span class='op'>=</span> <span class='st'>"#aeaeae"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_x_log10</a></span><span class='op'>(</span>breaks <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1000</span>, <span class='fl'>2000</span>, <span class='fl'>5000</span>, <span class='fl'>10000</span>, <span class='fl'>20000</span>, <span class='fl'>50000</span><span class='op'>)</span>,</span>
<span>                minor_breaks <span class='op'>=</span> <span class='cn'>NULL</span>,</span>
<span>                labels <span class='op'>=</span> <span class='fu'>scales</span><span class='fu'>::</span><span class='fu'><a href='https://scales.r-lib.org/reference/label_number.html'>label_number</a></span><span class='op'>(</span></span>
<span>                  big.mark <span class='op'>=</span> <span class='st'>"."</span>,prefix <span class='op'>=</span> <span class='st'>"$"</span>, decimal.mark <span class='op'>=</span> <span class='st'>"none"</span><span class='op'>)</span>,</span>
<span>                limits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>800</span>, <span class='fl'>57000</span><span class='op'>)</span>, </span>
<span>                </span>
<span>                <span class='co'># expanding panels: width</span></span>
<span>                expand <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/expansion.html'>expansion</a></span><span class='op'>(</span>add <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.17</span>, <span class='fl'>0.05</span><span class='op'>)</span><span class='op'>)</span></span>
<span>                <span class='op'>)</span> <span class='op'>+</span> </span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_y_continuous</a></span><span class='op'>(</span>breaks <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>25</span>, <span class='fl'>50</span>, <span class='fl'>75</span>, <span class='fl'>100</span><span class='op'>)</span>,</span>
<span>                     minor_breaks <span class='op'>=</span> <span class='cn'>NULL</span>,</span>
<span>                     labels <span class='op'>=</span> <span class='fu'>scales</span><span class='fu'>::</span><span class='fu'><a href='https://scales.r-lib.org/reference/percent_format.html'>percent_format</a></span><span class='op'>(</span>scale <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>, </span>
<span>                     limits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>100</span><span class='op'>)</span>,</span>
<span>                     </span>
<span>                     <span class='co'># expanding panels: height</span></span>
<span>                     expand <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/expansion.html'>expansion</a></span><span class='op'>(</span>mult <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.08</span>, <span class='fl'>0.04</span><span class='op'>)</span><span class='op'>)</span></span>
<span>                     <span class='op'>)</span> <span class='op'>+</span></span>
<span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_color_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='va'>colour_scheme</span><span class='op'>)</span> <span class='op'>+</span> </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_path</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>data_filtered_2</span>,</span>
<span>            <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>GDP</span>, y <span class='op'>=</span> <span class='va'>poverty</span>, </span>
<span>                group <span class='op'>=</span> <span class='va'>region2</span>, </span>
<span>                color <span class='op'>=</span> <span class='va'>region2</span><span class='op'>)</span>, </span>
<span>            alpha <span class='op'>=</span> <span class='fl'>0.2</span>, </span>
<span>            linewidth <span class='op'>=</span> <span class='fl'>0.20</span><span class='op'>)</span> <span class='op'>+</span> </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_path</a></span><span class='op'>(</span>linewidth <span class='op'>=</span> <span class='fl'>0.35</span><span class='op'>)</span> <span class='op'>+</span> </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_wrap.html'>facet_wrap</a></span><span class='op'>(</span><span class='op'>~</span> <span class='va'>region</span>, scales <span class='op'>=</span> <span class='st'>"free"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span></span>
<span>    legend.position <span class='op'>=</span> <span class='st'>"none"</span>, </span>
<span>    strip.text <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span>,</span>
<span>    axis.title <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span>, </span>
<span>    </span>
<span>    <span class='co'># axes guides theme </span></span>
<span>    axis.text.x <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span></span>
<span>      family <span class='op'>=</span> <span class='st'>"lato"</span>, colour <span class='op'>=</span> <span class='st'>"#939292"</span>, size <span class='op'>=</span> <span class='fl'>4.5</span>, <span class='co'>#dpi= 300 =&gt; 26.5 </span></span>
<span>      hjust <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.4</span>, <span class='fl'>0.4</span>, <span class='fl'>0.4</span>, <span class='fl'>0.4</span>, <span class='fl'>0.4</span>, <span class='fl'>0.6</span><span class='op'>)</span>, margin <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span>t <span class='op'>=</span> <span class='op'>-</span><span class='fl'>9</span><span class='op'>)</span><span class='op'>)</span>, <span class='co'>#dpi = 300 =&gt; 10</span></span>
<span>    axis.text.y <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span></span>
<span>      family <span class='op'>=</span> <span class='st'>"lato"</span>, colour <span class='op'>=</span> <span class='st'>"#676767"</span>, size <span class='op'>=</span> <span class='fl'>4.5</span>, <span class='co'>#dpi = 300 =&gt; 26.5</span></span>
<span>      vjust <span class='op'>=</span> <span class='fl'>0.5</span>, margin <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span>r <span class='op'>=</span> <span class='op'>-</span><span class='fl'>17</span><span class='op'>)</span><span class='op'>)</span>, <span class='co'>#dpi = 300 =&gt; 16</span></span>
<span></span>
<span>    <span class='co'># panel theme </span></span>
<span>    panel.background <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_rect</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#faf9f9"</span><span class='op'>)</span>, </span>
<span>    panel.border <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_rect</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='cn'>NA</span>, color <span class='op'>=</span> <span class='st'>"#efefef"</span><span class='op'>)</span>, </span>
<span>    </span>
<span>    <span class='co'># adjust between-panel spacing</span></span>
<span>    panel.spacing.x <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/grid/unit.html'>unit</a></span><span class='op'>(</span><span class='fl'>0.43</span>, <span class='st'>"lines"</span><span class='op'>)</span>, <span class='co'>#dpi = 300 =&gt; 0.45</span></span>
<span>    panel.spacing.y <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/grid/unit.html'>unit</a></span><span class='op'>(</span><span class='fl'>0.43</span>, <span class='st'>"lines"</span><span class='op'>)</span>, <span class='co'>#dpi = 300 =&gt; 0.6</span></span>
<span>    </span>
<span>    panel.grid.major <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span></span>
<span>    <span class='op'>)</span> </span>
<span></span>
<span><span class='va'>plot_theme</span></span></code></pre>
</div>
<p><img src="100546612_files/figure-html5/theme-1.png" width="1200" /></p>
</div>
<h3 id="titles">Titles</h3>
<p>Followingly, we include the <strong>title, subtitle, data sources (caption) and the license information</strong>, taking into consideration their different fonts, sizes and colours, i.e. their individual themes. Take into consideration that the “-” appear in R as the length -, even when they are actually of length – or —.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># library(ggtext)</span></span>
<span></span>
<span><span class='co'># text labels</span></span>
<span><span class='va'>graph_title</span> <span class='op'>&lt;-</span> <span class='st'>"By world region: Share living in extreme poverty vs. GDP per capita (1820-2017)"</span></span>
<span></span>
<span><span class='va'>graph_subtitle</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span></span>
<span>  <span class='st'>"Poverty is measured by the 'cost of basic needs'-approach. It represents the"</span>,</span>
<span>  <span class='st'>"share which was unable to obtain a bundle of very basic goods and"</span>,</span>
<span>  <span class='st'>"services.\nPrice changes over time (inflation) and price differences between"</span>,</span>
<span>  <span class='st'>"countries are taken into account in both measures."</span></span>
<span>  <span class='op'>)</span>, collapse<span class='op'>=</span><span class='st'>" "</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>graph_caption</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span></span>
<span>  <span class='st'>"Data sources:  Michail Moatsos for data on extreme poverty and Jutta Bolt and"</span>,</span>
<span>  <span class='st'>"Jan Luiten van Zanden for GDP data – both published in How was life? Volume II,"</span>,</span>
<span>  <span class='st'>"OECD 2021.&lt;br&gt;&lt;span style = 'font-family:lato; color:#403c94;'&gt;OurWorldinData.org&lt;/span&gt;"</span>,</span>
<span>  <span class='st'>"– Research and data to make progress against the world's largest problems."</span></span>
<span>  <span class='op'>)</span>, collapse<span class='op'>=</span><span class='st'>" "</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>graph_license</span> <span class='op'>&lt;-</span> <span class='st'>"Licensed under &lt;span style = 'color:#403c94;'&gt;CC-BY&lt;/span&gt; by the author Max Roser"</span></span>
<span></span>
<span></span>
<span><span class='va'>plot_titles</span> <span class='op'>&lt;-</span> <span class='va'>plot_theme</span> <span class='op'>+</span> </span>
<span>  </span>
<span>  <span class='co'># labels</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='va'>graph_title</span>, </span>
<span>       subtitle <span class='op'>=</span> <span class='va'>graph_subtitle</span>,</span>
<span>       caption <span class='op'>=</span> <span class='va'>graph_caption</span>,</span>
<span>       tag <span class='op'>=</span> <span class='va'>graph_license</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='co'># theme </span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>plot.title <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>family <span class='op'>=</span> <span class='st'>"playfair display"</span>,</span>
<span>                                  color <span class='op'>=</span> <span class='st'>"#191612"</span>,</span>
<span>                                  size <span class='op'>=</span> <span class='fl'>14.7</span>, <span class='co'>#dpi = 300 =&gt; 91.5</span></span>
<span>                                  hjust <span class='op'>=</span> <span class='fl'>0</span>, </span>
<span>                                  margin<span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span>b <span class='op'>=</span> <span class='fl'>2</span>, l <span class='op'>=</span> <span class='op'>-</span><span class='fl'>4</span><span class='op'>)</span><span class='op'>)</span>,</span>
<span>        plot.title.position <span class='op'>=</span> <span class='st'>"plot"</span>,</span>
<span>        plot.subtitle <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>family <span class='op'>=</span> <span class='st'>"lato_light"</span>,</span>
<span>                                     color <span class='op'>=</span> <span class='st'>"#515151"</span>,</span>
<span>                                     size <span class='op'>=</span> <span class='fl'>8</span>, <span class='co'>#8 #dpi = 300 =&gt; 51</span></span>
<span>                                     hjust <span class='op'>=</span> <span class='fl'>0</span>, </span>
<span>                                     lineheight <span class='op'>=</span> <span class='fl'>0.9</span>, <span class='co'>#dpi = 300 =&gt; 0.14</span></span>
<span>                                     margin<span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span>b <span class='op'>=</span> <span class='fl'>4</span>, l <span class='op'>=</span> <span class='op'>-</span><span class='fl'>1.8</span><span class='op'>)</span><span class='op'>)</span>,</span>
<span>        plot.caption <span class='op'>=</span> <span class='fu'><a href='https://wilkelab.org/ggtext/reference/element_markdown.html'>element_markdown</a></span><span class='op'>(</span>family <span class='op'>=</span> <span class='st'>"lato_light"</span>,</span>
<span>                                        color <span class='op'>=</span> <span class='st'>"#191612"</span>,</span>
<span>                                        size <span class='op'>=</span> <span class='fl'>7.7</span>, <span class='co'>#dpi = 300 =&gt; 48</span></span>
<span>                                        hjust <span class='op'>=</span> <span class='fl'>0</span>, </span>
<span>                                        lineheight <span class='op'>=</span> <span class='fl'>1.2</span>, <span class='co'>#dpi = 300 =&gt; 0.19</span></span>
<span>                                        margin<span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span>t <span class='op'>=</span> <span class='fl'>8</span>, l <span class='op'>=</span> <span class='op'>-</span><span class='fl'>1.8</span><span class='op'>)</span></span>
<span>                                        <span class='op'>)</span>,</span>
<span>        plot.caption.position <span class='op'>=</span> <span class='st'>"plot"</span>,</span>
<span>        plot.tag <span class='op'>=</span> <span class='fu'><a href='https://wilkelab.org/ggtext/reference/element_markdown.html'>element_markdown</a></span><span class='op'>(</span>family <span class='op'>=</span> <span class='st'>"lato_light"</span>,</span>
<span>                                color <span class='op'>=</span> <span class='st'>"#191612"</span>,</span>
<span>                                size <span class='op'>=</span> <span class='fl'>7.8</span>, <span class='co'>#dpi = 300 =&gt; 49</span></span>
<span>                                hjust <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>,</span>
<span>        plot.tag.position <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.993</span>,<span class='fl'>0.010</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/coord_cartesian.html'>coord_cartesian</a></span><span class='op'>(</span>clip <span class='op'>=</span> <span class='st'>"off"</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>plot_titles</span></span></code></pre>
</div>
<p><img src="100546612_files/figure-html5/titles-1.png" width="1200" /></p>
</div>
<h3 id="annotations-and-descriptions">Annotations and Descriptions</h3>
<p>Finally, we insert the <strong>annotations and descriptions</strong> into the individual regions’ panels. This task was a bit tiresome due to the sheer number of individual annotations that needed to be done, and as they are not standardized (e.g. all regions names in one corner), each annotation needed its own coordinates. It is important that this is our last step as it heavily relies on the exact coordinates for each annotation position. We use <code>geom_text</code> and not <code>annotate</code> because annotate does not allow us to filter which panel to annotate in, instead always conducting the command in all faceted graphs.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>plot_final</span> <span class='op'>&lt;-</span> <span class='va'>plot_titles</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='co'># years by region path </span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span></span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>label <span class='op'>=</span> <span class='va'>YEAR</span><span class='op'>)</span>, </span>
<span>    color <span class='op'>=</span> <span class='st'>"black"</span>, </span>
<span>    family <span class='op'>=</span> <span class='st'>"lato"</span>,</span>
<span>    size <span class='op'>=</span> <span class='fl'>1</span>, <span class='co'>#dpi = 300 =&gt; 6.8</span></span>
<span>    hjust <span class='op'>=</span> <span class='fl'>0</span>,</span>
<span>    nudge_x <span class='op'>=</span> <span class='fl'>0.03</span>,</span>
<span>    check_overlap <span class='op'>=</span> <span class='cn'>TRUE</span></span>
<span>    <span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='co'># annotations 3 upper plots </span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span></span>
<span>    data <span class='op'>=</span> <span class='va'>data_filtered</span> <span class='op'>|&gt;</span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span> <span class='op'>(</span><span class='va'>region</span> <span class='op'><a href='https://rdrr.io/r/base/match.html'>%in%</a></span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Global Average"</span>, <span class='st'>"Western Europe"</span>, </span>
<span>                                                   <span class='st'>"Australia, New Zealand, USA and Canada"</span><span class='op'>)</span><span class='op'>)</span>, </span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>800</span>, y <span class='op'>=</span> <span class='fl'>94</span>, </span>
<span>        label <span class='op'>=</span> <span class='st'>"Share living in extreme poverty"</span><span class='op'>)</span>, </span>
<span>    family <span class='op'>=</span> <span class='st'>"lato"</span>, </span>
<span>    colour <span class='op'>=</span> <span class='st'>"#939292"</span>, </span>
<span>    size <span class='op'>=</span> <span class='fl'>1.7</span>, <span class='co'>#dpi = 300 =&gt; 11</span></span>
<span>    hjust <span class='op'>=</span> <span class='fl'>0.19</span>,  </span>
<span>    vjust <span class='op'>=</span> <span class='op'>-</span><span class='fl'>0.1</span> <span class='co'>#0  </span></span>
<span>  <span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='co'># annotations and descriptions by region</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span></span>
<span>    data <span class='op'>=</span> <span class='va'>data_filtered</span> <span class='op'>|&gt;</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>region</span> <span class='op'>==</span> <span class='st'>"Global Average"</span><span class='op'>)</span>,</span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>5700</span>, y <span class='op'>=</span> <span class='fl'>53</span>, label <span class='op'>=</span> <span class='va'>region</span><span class='op'>)</span>,</span>
<span>    family <span class='op'>=</span> <span class='st'>"lato"</span>, </span>
<span>    colour <span class='op'>=</span> <span class='st'>"#840037"</span>,</span>
<span>    size <span class='op'>=</span> <span class='fl'>2.8</span>, <span class='co'>#dpi = 300 =&gt; 18.5  </span></span>
<span>    hjust <span class='op'>=</span> <span class='fl'>0</span>, </span>
<span>    vjust <span class='op'>=</span> <span class='fl'>0</span></span>
<span>    <span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span></span>
<span>    data <span class='op'>=</span> <span class='va'>data_filtered</span> <span class='op'>|&gt;</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>region</span> <span class='op'>==</span> <span class='st'>"Global Average"</span><span class='op'>)</span>,</span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>1300</span>, y <span class='op'>=</span> <span class='fl'>88</span>, </span>
<span>        label <span class='op'>=</span> <span class='st'>"1820: Three-quarters of the world </span></span>
<span><span class='st'>        lived in extreme poverty"</span></span>
<span>        <span class='op'>)</span>,</span>
<span>    family <span class='op'>=</span> <span class='st'>"lato_light"</span>,</span>
<span>    colour <span class='op'>=</span> <span class='st'>"#840037"</span>,</span>
<span>    size <span class='op'>=</span> <span class='fl'>1.8</span>,  <span class='co'>#dpi = 300 =&gt; 11</span></span>
<span>    hjust <span class='op'>=</span> <span class='fl'>0</span>, </span>
<span>    vjust <span class='op'>=</span> <span class='fl'>0</span></span>
<span>    <span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span></span>
<span>    data <span class='op'>=</span> <span class='va'>data_filtered</span> <span class='op'>|&gt;</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>region</span> <span class='op'>==</span> <span class='st'>"Global Average"</span><span class='op'>)</span>,</span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>1300</span>, y <span class='op'>=</span> <span class='fl'>78</span>, </span>
<span>        label <span class='op'>=</span> <span class='st'>"Three-quarters of the world \"could not affort a tiny space to live, </span></span>
<span><span class='st'>        some\nminimum heating capacity, and food that would not induce malnutrition.\""</span></span>
<span>        <span class='op'>)</span>,</span>
<span>    family <span class='op'>=</span> <span class='st'>"lato_light"</span>,</span>
<span>    colour <span class='op'>=</span> <span class='st'>"#840037"</span>,</span>
<span>    size <span class='op'>=</span> <span class='fl'>1.6</span>, <span class='co'>#dpi = 300 =&gt; 10  </span></span>
<span>    hjust <span class='op'>=</span> <span class='fl'>0</span>, </span>
<span>    vjust <span class='op'>=</span> <span class='fl'>0</span>, </span>
<span>    lineheight <span class='op'>=</span> <span class='fl'>0.8</span> <span class='co'>#dpi = 300 =&gt; 0.14</span></span>
<span>    <span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>      <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span></span>
<span>    data <span class='op'>=</span> <span class='va'>data_filtered</span> <span class='op'>|&gt;</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>region</span> <span class='op'>==</span> <span class='st'>"Global Average"</span><span class='op'>)</span>,</span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>18000</span>, y <span class='op'>=</span> <span class='fl'>15</span>, </span>
<span>        label <span class='op'>=</span> <span class='st'>"9% of the world live\nin extreme poverty"</span></span>
<span>        <span class='op'>)</span>,</span>
<span>    family <span class='op'>=</span> <span class='st'>"lato_light"</span>,</span>
<span>    colour <span class='op'>=</span> <span class='st'>"#840037"</span>,</span>
<span>    size <span class='op'>=</span> <span class='fl'>1.8</span>, <span class='co'>#dpi = 300 =&gt; 11  </span></span>
<span>    hjust <span class='op'>=</span> <span class='fl'>0</span>, </span>
<span>    vjust <span class='op'>=</span> <span class='fl'>0</span>, </span>
<span>    lineheight <span class='op'>=</span> <span class='fl'>0.8</span> <span class='co'>#dpi = 300 =&gt; 0.14</span></span>
<span>    <span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span></span>
<span>    data <span class='op'>=</span> <span class='va'>data_filtered</span> <span class='op'>|&gt;</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>region</span> <span class='op'>==</span> <span class='st'>"Western Europe"</span><span class='op'>)</span>,</span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>2900</span>, y <span class='op'>=</span> <span class='fl'>68</span>, label <span class='op'>=</span> <span class='va'>region</span><span class='op'>)</span>,</span>
<span>    family <span class='op'>=</span> <span class='st'>"lato"</span>,</span>
<span>    colour <span class='op'>=</span> <span class='st'>"#203558"</span>, </span>
<span>    size <span class='op'>=</span> <span class='fl'>2.1</span>, <span class='co'>#dpi = 300 =&gt; 14 </span></span>
<span>    hjust <span class='op'>=</span> <span class='fl'>0</span>, </span>
<span>    vjust <span class='op'>=</span> <span class='fl'>0</span></span>
<span>    <span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span></span>
<span>    data <span class='op'>=</span> <span class='va'>data_filtered</span> <span class='op'>|&gt;</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>region</span> <span class='op'>==</span> <span class='st'>"Australia, New Zealand, USA and Canada"</span><span class='op'>)</span>,</span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>4000</span>, y <span class='op'>=</span> <span class='fl'>66</span>, label <span class='op'>=</span> <span class='st'>"Australia, New Zealand,\nUSA and Canada"</span><span class='op'>)</span>,</span>
<span>    family <span class='op'>=</span> <span class='st'>"lato"</span>,</span>
<span>    colour <span class='op'>=</span> <span class='st'>"#3f3386"</span>, </span>
<span>    size <span class='op'>=</span> <span class='fl'>2.1</span>, <span class='co'>#dpi = 300 =&gt; 14 </span></span>
<span>    hjust <span class='op'>=</span> <span class='fl'>0</span>, </span>
<span>    vjust <span class='op'>=</span> <span class='fl'>0</span>, </span>
<span>    lineheight <span class='op'>=</span> <span class='fl'>0.8</span> <span class='co'>#dpi = 300 =&gt; 0.14</span></span>
<span>    <span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span></span>
<span>    data <span class='op'>=</span> <span class='va'>data_filtered</span> <span class='op'>|&gt;</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>region</span> <span class='op'>==</span> <span class='st'>"Australia, New Zealand, USA and Canada"</span><span class='op'>)</span>,</span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>4000</span>, y <span class='op'>=</span> <span class='fl'>52</span>, </span>
<span>        label <span class='op'>=</span> <span class='st'>"These four countries had already achieved\nenough </span></span>
<span><span class='st'>        economic growth to reduce extreme\npoverty to very low levels </span></span>
<span><span class='st'>        in the post-war years."</span></span>
<span>        <span class='op'>)</span>,</span>
<span>    family <span class='op'>=</span> <span class='st'>"lato_light"</span>,</span>
<span>    colour <span class='op'>=</span> <span class='st'>"#3f3386"</span>, </span>
<span>    size <span class='op'>=</span> <span class='fl'>1.6</span>, <span class='co'>#dpi = 300 =&gt; 10</span></span>
<span>    hjust <span class='op'>=</span> <span class='fl'>0</span>, </span>
<span>    vjust <span class='op'>=</span> <span class='fl'>0</span>, </span>
<span>    lineheight <span class='op'>=</span> <span class='fl'>0.8</span> <span class='co'>#dpi = 300 =&gt; 0.14</span></span>
<span>    <span class='op'>)</span> <span class='op'>+</span></span>
<span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span></span>
<span>    data <span class='op'>=</span> <span class='va'>data_filtered</span> <span class='op'>|&gt;</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>region</span> <span class='op'>==</span> <span class='st'>"Middle East and North Africa"</span><span class='op'>)</span>,</span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>4000</span>, y <span class='op'>=</span> <span class='fl'>33</span>, label <span class='op'>=</span> <span class='va'>region</span><span class='op'>)</span>,</span>
<span>    family <span class='op'>=</span> <span class='st'>"lato"</span>,</span>
<span>    colour <span class='op'>=</span> <span class='st'>"#845100"</span>, </span>
<span>    size <span class='op'>=</span> <span class='fl'>2.1</span>, <span class='co'>#dpi = 300 =&gt; 14 </span></span>
<span>    hjust <span class='op'>=</span> <span class='fl'>0</span>, </span>
<span>    vjust <span class='op'>=</span> <span class='fl'>0</span></span>
<span>    <span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span></span>
<span>    data <span class='op'>=</span> <span class='va'>data_filtered</span> <span class='op'>|&gt;</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>region</span> <span class='op'>==</span> <span class='st'>"Eastern Europe"</span><span class='op'>)</span>,</span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>1230</span>, y <span class='op'>=</span> <span class='fl'>19</span>, label <span class='op'>=</span> <span class='va'>region</span><span class='op'>)</span>,</span>
<span>    family <span class='op'>=</span> <span class='st'>"lato"</span>,</span>
<span>    colour <span class='op'>=</span> <span class='st'>"#057ea1"</span>, </span>
<span>    size <span class='op'>=</span> <span class='fl'>2.1</span>, <span class='co'>#dpi = 300 =&gt; 14 </span></span>
<span>    hjust <span class='op'>=</span> <span class='fl'>0</span>, </span>
<span>    vjust <span class='op'>=</span> <span class='fl'>0</span></span>
<span>    <span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span></span>
<span>    data <span class='op'>=</span> <span class='va'>data_filtered</span> <span class='op'>|&gt;</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>region</span> <span class='op'>==</span> <span class='st'>"Sub-Saharan Africa"</span><span class='op'>)</span>,</span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>3750</span>, y <span class='op'>=</span> <span class='fl'>66</span>, label <span class='op'>=</span> <span class='va'>region</span><span class='op'>)</span>,</span>
<span>    family <span class='op'>=</span> <span class='st'>"lato"</span>,</span>
<span>    colour <span class='op'>=</span> <span class='st'>"#951c73"</span>, </span>
<span>    size <span class='op'>=</span> <span class='fl'>2.1</span>, <span class='co'>#dpi = 300 =&gt; 14 </span></span>
<span>    hjust <span class='op'>=</span> <span class='fl'>0</span>, </span>
<span>    vjust <span class='op'>=</span> <span class='fl'>0</span></span>
<span>    <span class='op'>)</span> <span class='op'>+</span>  </span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span></span>
<span>    data <span class='op'>=</span> <span class='va'>data_filtered</span> <span class='op'>|&gt;</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>region</span> <span class='op'>==</span> <span class='st'>"Sub-Saharan Africa"</span><span class='op'>)</span>,</span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>3800</span>, y <span class='op'>=</span> <span class='fl'>52</span>, </span>
<span>        label <span class='op'>=</span> <span class='st'>"According to the lastest data 37% of the\npopulation </span></span>
<span><span class='st'>        live in extreme poverty in\nthe world's poorest region."</span></span>
<span>        <span class='op'>)</span>,</span>
<span>    family <span class='op'>=</span> <span class='st'>"lato_light"</span>,</span>
<span>    colour <span class='op'>=</span> <span class='st'>"#951c73"</span>, </span>
<span>    size <span class='op'>=</span> <span class='fl'>1.6</span>, <span class='co'>#dpi = 300 =&gt; 10</span></span>
<span>    hjust <span class='op'>=</span> <span class='fl'>0</span>, </span>
<span>    vjust <span class='op'>=</span> <span class='fl'>0</span>, </span>
<span>    lineheight <span class='op'>=</span> <span class='fl'>0.8</span> <span class='co'>#dpi = 300 =&gt; 0.14</span></span>
<span>    <span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span></span>
<span>    data <span class='op'>=</span> <span class='va'>data_filtered</span> <span class='op'>|&gt;</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>region</span> <span class='op'>==</span> <span class='st'>"East Asia"</span><span class='op'>)</span>,</span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>3900</span>, y <span class='op'>=</span> <span class='fl'>55</span>, label <span class='op'>=</span> <span class='va'>region</span><span class='op'>)</span>,</span>
<span>    family <span class='op'>=</span> <span class='st'>"lato"</span>,</span>
<span>    colour <span class='op'>=</span> <span class='st'>"#30918d"</span>, </span>
<span>    size <span class='op'>=</span> <span class='fl'>2.1</span>, <span class='co'>#dpi = 300 =&gt; 14 </span></span>
<span>    hjust <span class='op'>=</span> <span class='fl'>0</span>, </span>
<span>    vjust <span class='op'>=</span> <span class='fl'>0</span></span>
<span>    <span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span></span>
<span>    data <span class='op'>=</span> <span class='va'>data_filtered</span> <span class='op'>|&gt;</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>region</span> <span class='op'>==</span> <span class='st'>"South and Southeast Asia"</span><span class='op'>)</span>,</span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>1850</span>, y <span class='op'>=</span> <span class='fl'>54</span>, label <span class='op'>=</span> <span class='va'>region</span><span class='op'>)</span>,</span>
<span>    family <span class='op'>=</span> <span class='st'>"lato"</span>,</span>
<span>    colour <span class='op'>=</span> <span class='st'>"#e0902f"</span>, </span>
<span>    size <span class='op'>=</span> <span class='fl'>2.1</span>, <span class='co'>#dpi = 300 =&gt; 14 </span></span>
<span>    hjust <span class='op'>=</span> <span class='fl'>0</span>, </span>
<span>    vjust <span class='op'>=</span> <span class='fl'>0</span></span>
<span>    <span class='op'>)</span> <span class='op'>+</span></span>
<span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span></span>
<span>    data <span class='op'>=</span> <span class='va'>data_filtered</span> <span class='op'>|&gt;</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>region</span> <span class='op'>==</span> <span class='st'>"Latin America and Caribbean"</span><span class='op'>)</span>,</span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>3600</span>, y <span class='op'>=</span> <span class='fl'>68</span>, label <span class='op'>=</span> <span class='va'>region</span><span class='op'>)</span>,</span>
<span>    family <span class='op'>=</span> <span class='st'>"lato"</span>,</span>
<span>    colour <span class='op'>=</span> <span class='st'>"#d54c3f"</span>, </span>
<span>    size <span class='op'>=</span> <span class='fl'>2.1</span>, <span class='co'>#dpi = 300 =&gt; 14 </span></span>
<span>    hjust <span class='op'>=</span> <span class='fl'>0</span>, </span>
<span>    vjust <span class='op'>=</span> <span class='fl'>0</span></span>
<span>    <span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>data_filtered</span> <span class='op'>|&gt;</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>region</span> <span class='op'>==</span> <span class='st'>"Latin America and Caribbean"</span><span class='op'>)</span>,</span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>3600</span>, y <span class='op'>=</span><span class='fl'>54</span>, </span>
<span>        label <span class='op'>=</span> <span class='st'>"As a world region with very high inequality\nthe </span></span>
<span><span class='st'>        share in poverty was comparatively high\nat any given level of </span></span>
<span><span class='st'>        average income."</span></span>
<span>        <span class='op'>)</span>,</span>
<span>    family <span class='op'>=</span> <span class='st'>"lato_light"</span>,</span>
<span>    colour <span class='op'>=</span> <span class='st'>"#d54c3f"</span>, </span>
<span>    size <span class='op'>=</span> <span class='fl'>1.6</span>, <span class='co'>#dpi = 300 =&gt; 10</span></span>
<span>    hjust <span class='op'>=</span> <span class='fl'>0</span>, </span>
<span>    vjust <span class='op'>=</span> <span class='fl'>0</span>, </span>
<span>    lineheight <span class='op'>=</span> <span class='fl'>0.8</span> <span class='co'>#dpi = 300 =&gt; 0.14</span></span>
<span>    <span class='op'>)</span> </span>
<span></span>
<span><span class='va'>plot_final</span>  </span></code></pre>
</div>
<p><img src="100546612_files/figure-html5/unnamed-chunk-1-1.png" width="1200" /></p>
</div>
<h3 id="logo">Logo</h3>
<p>While our code for the graph is completed as it is, we can include the <a href="https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Our_World_in_Data_logo.png/330px-Our_World_in_Data_logo.png"><strong>OurWorldinData logo</strong></a> with a simple trick. We manually overlay the image of the logo on top of the figure of the replicated graph we have created. We can do this with the <code>grid package</code> by indicating where the logo will appear relative to the final figure, and then drawing the logo on top of the plot.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># library(grid)</span></span>
<span></span>
<span><span class='va'>image_grob</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/grid/grid.raster.html'>rasterGrob</a></span><span class='op'>(</span><span class='fu'>png</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/png/man/readPNG.html'>readPNG</a></span><span class='op'>(</span><span class='st'>"Our_World_in_Data_logo.png"</span><span class='op'>)</span>,</span>
<span>                         x <span class='op'>=</span> <span class='fl'>0.997</span>, y <span class='op'>=</span> <span class='fl'>0.992</span>,  </span>
<span>                         hjust <span class='op'>=</span> <span class='fl'>1</span>, vjust <span class='op'>=</span> <span class='fl'>1</span>, </span>
<span>                         width <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/grid/unit.html'>unit</a></span><span class='op'>(</span><span class='fl'>0.082</span>, <span class='st'>"npc"</span><span class='op'>)</span><span class='op'>)</span> </span>
<span></span>
<span><span class='co'># new plotting canvas</span></span>
<span><span class='va'>replication</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/grid/grid.newpage.html'>grid.newpage</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> <span class='co'># plot graph</span></span>
<span>  <span class='fu'><a href='https://rdrr.io/r/grid/grid.draw.html'>grid.draw</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplotGrob.html'>ggplotGrob</a></span><span class='op'>(</span><span class='va'>plot_final</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> <span class='co'># overlay logo</span></span>
<span>  <span class='fu'><a href='https://rdrr.io/r/grid/grid.draw.html'>grid.draw</a></span><span class='op'>(</span><span class='va'>image_grob</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="100546612_files/figure-html5/logo-1.png" width="1200" data-distill-preview=1 /></p>
</div>
<h2 id="comparison">Comparison</h2>
<p>Here the result of our replication (right) compared to the original graph:</p>
<div style="display: flex; justify-content: space-between;margin-left: -50%; margin-right: -50%;">
<div style="width: 50.5%;">
<p>Original</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="Growth-and-poverty-since-1820.png" width="100%" /></p>
</div>
</div>
<div style="width: 49.5%;">
<p>Replication</p>
<div class="layout-chunk" data-layout="l-body-outset">
<p><img src="100546612_files/figure-html5/replication-1.png" width="1200" /></p>
</div>
</div>
</div>
<h3 id="limitations">Limitations</h3>
<p>While we are able to almost fully replicate the original graph, some small issues escape us:</p>
<ul>
<li>The annotations font is fatter than the original one. I tried with different variations of the font Lato (e.g. lato light), but nothing comes closer to the original.</li>
<li>The years annotations following the regions’ line path are not exactly in the same positions as the original.</li>
<li>The original graphs’ foreground regions’ line paths are actually small arrows, while the background line paths are normal lines. We could use geom_arrow for the foreground lines, but it does not have the same arguments that geom_path. Due to our dimensions we have to specify some arguments like linewidth for the lines to replicate the original ones, hence, we loose the arrows.</li>
</ul>
<h3 id="lessons">Lessons</h3>
<p>The most important takeaway’s from this exercise for me are the knowledge I have gained about the expansion and limits arguments, how much the dimensions can affect the final product and to keep that in mind from the beginning, and how the order of commands impact the display of the plot.</p>
<hr />
<h2 id="improvement-possibilities">Improvement Possibilities</h2>
<h3 id="the-original-graph">The original graph</h3>
<div style="display: flex; align-items: flex-start; gap: 15px; overflow: hidden;">
<img src="Growth-and-poverty-since-1820.png" 
     style="width: 200px;"/>
<p>
The original graph portrays the relationship between the share living in extreme poverty and the GDP per capita in 8 world regions and the global average between the years 1817 and 2017.
</p>
</div>
<p>The original graphs’ <strong>strengths</strong> include its clear comparison between the world regions wealth and poverty trends, which highlight the significant variation between regions, and its historical perspective, which provides some context for the global and regional progress. Visually, the regional facets and colouring contribute to their acute distinction and provide clarity and readability.</p>
<p>Still, we find improvement possibilities.</p>
<p>Firstly, visually, 9 facets are overstimulating and hard to read all together. Scaling back the information between the graphs can help better understand them. The colours, while pretty, do not actually provide additional help in reading between the graphs. The background lines are faint, so that one can not actually compare a region with a different one, also because one keeps forgetting which colour belongs to which region.</p>
<p>Content-wise, the graph fails to tell a story, which is the improvement I would like to propose. The original graph displays the decline of extreme poverty oversimplified in relation to GDP per capita, while ignoring a larger issue at stake: how the individual regions, and their economic classifications, play into each others rise and fall. While we can compare world regions, I would like to propose to compare the Global South to the Global North, in order to take a better look at their interplay of GDP per capita and extreme poverty, and augment the historical perspective the original graph hinted on. The power games that we can display reflect the global political dynamics, and might make us come closer to Max Roser’s proposition: “<strong>What needs explanation is not poverty, but prosperity”.</strong></p>
<p>This change in narrative clarity will allow us to improve visual readability, as grouping by Global South and Global North with distinct colour schemes will allow for clearer comparisons, firstly identifying regional disparities as well as global trends with GDP per capita and extreme poverty, and secondly, between the trends of GDP per capita and extreme poverty themselves.</p>
<h2 id="the-bare-naked-story">The bare naked story</h2>
<p>To try to access this side of the story on global economic development and extreme poverty we can create a simple streamgraph that however manages to make strong visual point of the inverse relationship between poverty and GDP.</p>
<p>For that, we use the <a href="https://github.com/hrbrmstr/streamgraph">streamgraph package of hrbrmstr’s github</a>, which at the time of the creation of this article is at version 0.9.0 online, but the changes registred in the github are only until 0.8.1 (i.e. I am unsure if there are new functions apart from the ones I use here). Also, not all of the functions work all of the time, as the package is still being worked at.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://github.com/hrbrmstr/streamgraph'>streamgraph</a></span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/utils/packageDescription.html'>packageVersion</a></span><span class='op'>(</span><span class='st'>"streamgraph"</span><span class='op'>)</span> <span class='co'># use latest version (0.9.0. for this article) </span></span></code></pre>
</div>
<pre><code>[1] &#39;0.9.0&#39;</code></pre>
</div>
<p>Firstly, we create a second data set for our streamgraphs, in which we factor our regions depending on their inclusion of Global North or Global South<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>, adding as well a prefix and a divided colour-blind friendly colour palette (South = blues/greens, North = reds, Global = white) to sort them visually in the graph.</p>
<h3 id="processing-of-the-data">Processing of the data</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>data_impr_sg</span> <span class='op'>&lt;-</span> <span class='va'>data_filtered</span></span>
<span></span>
<span><span class='co'># update levels to reflect Global South/North distinction</span></span>
<span><span class='va'>data_impr_sg</span><span class='op'>$</span><span class='va'>region_ordered</span> <span class='op'>&lt;-</span> </span>
<span>  <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>data_impr_sg</span><span class='op'>$</span><span class='va'>region</span>,</span>
<span>  levels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rev.html'>rev</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span></span>
<span>             <span class='co'># Global North</span></span>
<span>             <span class='st'>"Australia, New Zealand, USA and Canada"</span>, </span>
<span>             <span class='st'>"Western Europe"</span>,</span>
<span>             <span class='st'>"Eastern Europe"</span>,</span>
<span>             </span>
<span>             <span class='co'># Middle</span></span>
<span>             <span class='st'>"Global Average"</span>, </span>
<span>             </span>
<span>             <span class='co'># Global South</span></span>
<span>             <span class='st'>"Middle East and North Africa"</span>,            </span>
<span>             <span class='st'>"Latin America and Caribbean"</span>, </span>
<span>             <span class='st'>"East Asia"</span>,</span>
<span>             <span class='st'>"South and Southeast Asia"</span>,</span>
<span>             <span class='st'>"Sub-Saharan Africa"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> </span>
<span></span>
<span><span class='co'># add prefix for deterministic sorting </span></span>
<span><span class='va'>data_impr_sg</span><span class='op'>$</span><span class='va'>region_prefix</span> <span class='op'>&lt;-</span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/recode.html'>recode</a></span><span class='op'>(</span><span class='va'>data_impr_sg</span><span class='op'>$</span><span class='va'>region_ordered</span>,</span>
<span>             <span class='st'>"Australia, New Zealand, USA and Canada"</span> <span class='op'>=</span> <span class='st'>"1. Australia, New Zealand, USA and Canada"</span>,</span>
<span>             <span class='st'>"Western Europe"</span> <span class='op'>=</span>                  <span class='st'>"1. Western Europe"</span>,</span>
<span>             <span class='st'>"Eastern Europe"</span> <span class='op'>=</span>                  <span class='st'>"1. Eastern Europe"</span>,</span>
<span>             <span class='st'>"Global Average"</span> <span class='op'>=</span>                  <span class='st'>"2. Global Average"</span>,</span>
<span>             <span class='st'>"Middle East and North Africa"</span> <span class='op'>=</span>    <span class='st'>"3. Middle East and North Africa"</span>,</span>
<span>             <span class='st'>"Latin America and Caribbean"</span> <span class='op'>=</span>     <span class='st'>"3. Latin America and Caribbean"</span>,</span>
<span>             <span class='st'>"East Asia"</span> <span class='op'>=</span>                       <span class='st'>"3. East Asia"</span>,</span>
<span>             <span class='st'>"South and Southeast Asia"</span> <span class='op'>=</span>        <span class='st'>"3. South and Southeast Asia"</span>,</span>
<span>             <span class='st'>"Sub-Saharan Africa"</span> <span class='op'>=</span>              <span class='st'>"3. Sub-Saharan Africa"</span></span>
<span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># update color palette to align with prefixed names: colours to remain distinct but grouped appropriately</span></span>
<span><span class='va'>cb_colors</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"dodgerblue4"</span>, </span>
<span>               <span class='st'>"#E69F00"</span>, </span>
<span>               <span class='st'>"#56B4E9"</span>, </span>
<span>               <span class='st'>"#009E73"</span>, </span>
<span>               <span class='st'>"#F0E442"</span>, </span>
<span>               <span class='st'>"red"</span>, </span>
<span>               <span class='st'>"black"</span>, </span>
<span>               <span class='st'>"#D55E00"</span>, </span>
<span>               <span class='st'>"#B9E77C"</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>cb_colors_ordered</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span></span>
<span>  <span class='st'>"1. Australia, New Zealand, USA and Canada"</span> <span class='op'>=</span> <span class='st'>"#D55E00"</span>,</span>
<span>  <span class='st'>"1. Western Europe"</span> <span class='op'>=</span> <span class='st'>"red"</span>,</span>
<span>  <span class='st'>"1. Eastern Europe"</span> <span class='op'>=</span> <span class='st'>"#E69F00"</span>,</span>
<span>  <span class='st'>"2. Global Average"</span> <span class='op'>=</span> <span class='st'>"white"</span>,</span>
<span>  <span class='st'>"3. Middle East and North Africa"</span> <span class='op'>=</span> <span class='st'>"aquamarine2"</span>,</span>
<span>  <span class='st'>"3. Latin America and Caribbean"</span> <span class='op'>=</span> <span class='st'>"#B9E77C"</span>,</span>
<span>  <span class='st'>"3. East Asia"</span> <span class='op'>=</span> <span class='st'>"#56B4E9"</span>,</span>
<span>  <span class='st'>"3. South and Southeast Asia"</span> <span class='op'>=</span> <span class='st'>"#009E73"</span>,</span>
<span>  <span class='st'>"3. Sub-Saharan Africa"</span> <span class='op'>=</span> <span class='st'>"dodgerblue4"</span></span>
<span><span class='op'>)</span></span></code></pre>
</div>
</div>
<h3 id="creating-our-graph">Creating our graph</h3>
<p>With the available arguments of the package, we can generate two streamgraphs for GDP per capita and extreme poverty individually, set as our x variable a timeline, add a title, our set custom colours for Global South and Global North regions with an anchored Global Average in the middle, and make the plot interactive.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>sg_poverty</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/streamgraph/man/streamgraph.html'>streamgraph</a></span><span class='op'>(</span></span>
<span>  <span class='va'>data_impr_sg</span>, </span>
<span>  key <span class='op'>=</span> <span class='st'>"region_prefix"</span>, </span>
<span>  value <span class='op'>=</span> <span class='st'>"poverty"</span>, </span>
<span>  date <span class='op'>=</span> <span class='st'>"YEAR"</span>, </span>
<span>  interactive<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://rdrr.io/pkg/streamgraph/man/sg_axis_x.html'>sg_axis_x</a></span><span class='op'>(</span>tick_interval <span class='op'>=</span> <span class='fl'>50</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='co'># simplifying x axis</span></span>
<span>  <span class='fu'><a href='https://rdrr.io/pkg/streamgraph/man/sg_fill_manual.html'>sg_fill_manual</a></span><span class='op'>(</span><span class='va'>cb_colors_ordered</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='co'># new color palette</span></span>
<span>  <span class='fu'><a href='https://rdrr.io/pkg/streamgraph/man/sg_legend.html'>sg_legend</a></span><span class='op'>(</span>show <span class='op'>=</span> <span class='cn'>TRUE</span>, label <span class='op'>=</span> <span class='st'>"Regions"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='co'># legend for regions</span></span>
<span>  <span class='fu'><a href='https://rdrr.io/pkg/streamgraph/man/sg_title.html'>sg_title</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Extreme Poverty"</span><span class='op'>)</span> <span class='co'># %&gt;% </span></span>
<span>  <span class='co'># sg_annotate at time of publishing not working =&gt; ads text anotations</span></span>
<span>  <span class='co'># sg_annotate(label = "Global Average", x = "", y = "460", </span></span>
<span>              <span class='co'># color = "black", size = 16) %&gt;% </span></span>
<span>  <span class='co'># sg_annotate(label = "\"Global North\"", x = "0.05", y = "600", </span></span>
<span>              <span class='co'># color = "black", size = 20) %&gt;% </span></span>
<span>  <span class='co'># sg_annotate(label = "\"Global South\"", x = "0.05", y = "100", </span></span>
<span>              <span class='co'># color = "black", size = 20) # %&gt;% </span></span>
<span>  <span class='co'># sg_add_marker currently not working =&gt; ads a vertical line </span></span>
<span>  <span class='co'># sg_add_marker(x = 1900, label = "1900", stroke_width = 0.5,</span></span>
<span>  <span class='co'># stroke = "#7f7f7f", space = 5, y = 0, color = "#7f7f7f",</span></span>
<span>  <span class='co'># size = 12, anchor = "start")</span></span>
<span></span>
<span><span class='va'>sg_gdp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/streamgraph/man/streamgraph.html'>streamgraph</a></span><span class='op'>(</span></span>
<span>  <span class='va'>data_impr_sg</span>, </span>
<span>  key<span class='op'>=</span><span class='st'>"region_prefix"</span>, </span>
<span>  value<span class='op'>=</span><span class='st'>"GDP"</span>, </span>
<span>  date<span class='op'>=</span><span class='st'>"YEAR"</span>, </span>
<span>  interactive <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://rdrr.io/pkg/streamgraph/man/sg_axis_x.html'>sg_axis_x</a></span><span class='op'>(</span>tick_interval <span class='op'>=</span> <span class='fl'>50</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://rdrr.io/pkg/streamgraph/man/sg_fill_manual.html'>sg_fill_manual</a></span><span class='op'>(</span><span class='va'>cb_colors_ordered</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://rdrr.io/pkg/streamgraph/man/sg_legend.html'>sg_legend</a></span><span class='op'>(</span>show <span class='op'>=</span> <span class='cn'>TRUE</span>, label <span class='op'>=</span> <span class='st'>"GDP"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://rdrr.io/pkg/streamgraph/man/sg_title.html'>sg_title</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"GDP per capita"</span><span class='op'>)</span> <span class='co'># %&gt;% </span></span>
<span>  <span class='co'># sg_annotate(label = "Global Average", x = "1850", y = "62000", </span></span>
<span>              <span class='co'># color = "black", size = 16) %&gt;%</span></span>
<span>  <span class='co'># sg_annotate(label = "Global North", x = "1850", y = "160000", </span></span>
<span>              <span class='co'># color = "black", size = 20) %&gt;% </span></span>
<span>  <span class='co'># sg_annotate(label = "Global South", x = "1850", y = "100", </span></span>
<span>              <span class='co'># color = "black", size = 20) # %&gt;% </span></span>
<span>  <span class='co'># sg_add_marker(x = 1900, label = "1900", stroke_width = 0.5,</span></span>
<span>  <span class='co'># stroke = "#7f7f7f", space = 5, y = 0, color = "#7f7f7f",</span></span>
<span>  <span class='co'># size = 12, anchor = "start")</span></span></code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div style="margin:auto;text-align:center">
<strong>Extreme Poverty</strong>
<br/>
<div id="htmlwidget-32ca8d517622800ce554" class="streamgraph html-widget" style="width:960px;height:500px;"></div>
<div id="htmlwidget-32ca8d517622800ce554-legend" style="width:960" class="streamgraph html-widget-legend"><center><label style='padding-right:5px' for='htmlwidget-32ca8d517622800ce554-select'></label><select id='htmlwidget-32ca8d517622800ce554-select' style='visibility:hidden;'></select></center></div>
<script type="application/json" data-for="htmlwidget-32ca8d517622800ce554">{"x":{"data":{"key":["3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada"],"value":[91,69,78,85,75,77.125,91,73,55,95,69,80,84,71,72,84,65,28,93,74,80,80,68,69.125,68,59,31,91,66,76,74,59,57.375,43,41,9,87,62,77,61,55,55.75,63,38,3,70,67,82,45,33,42.25,19,21,1,67,69,66,45,34,37.5,8,11,0,62,64,64,42,26,32.75,2,2,0,63,50,46,12,17,24,3,0,1,58,47,37,17,7,21,1,0,1,50,35,29,12,3,17.875,13,0,1,41,23,17,8,1,11.875,3,1,1],"date":["1820-01-01","1820-01-01","1820-01-01","1820-01-01","1820-01-01","1820-01-01","1820-01-01","1820-01-01","1820-01-01","1850-01-01","1850-01-01","1850-01-01","1850-01-01","1850-01-01","1850-01-01","1850-01-01","1850-01-01","1850-01-01","1870-01-01","1870-01-01","1870-01-01","1870-01-01","1870-01-01","1870-01-01","1870-01-01","1870-01-01","1870-01-01","1900-01-01","1900-01-01","1900-01-01","1900-01-01","1900-01-01","1900-01-01","1900-01-01","1900-01-01","1900-01-01","1920-01-01","1920-01-01","1920-01-01","1920-01-01","1920-01-01","1920-01-01","1920-01-01","1920-01-01","1920-01-01","1950-01-01","1950-01-01","1950-01-01","1950-01-01","1950-01-01","1950-01-01","1950-01-01","1950-01-01","1950-01-01","1960-01-01","1960-01-01","1960-01-01","1960-01-01","1960-01-01","1960-01-01","1960-01-01","1960-01-01","1960-01-01","1970-01-01","1970-01-01","1970-01-01","1970-01-01","1970-01-01","1970-01-01","1970-01-01","1970-01-01","1970-01-01","1980-01-01","1980-01-01","1980-01-01","1980-01-01","1980-01-01","1980-01-01","1980-01-01","1980-01-01","1980-01-01","1990-01-01","1990-01-01","1990-01-01","1990-01-01","1990-01-01","1990-01-01","1990-01-01","1990-01-01","1990-01-01","2000-01-01","2000-01-01","2000-01-01","2000-01-01","2000-01-01","2000-01-01","2000-01-01","2000-01-01","2000-01-01","2010-01-01","2010-01-01","2010-01-01","2010-01-01","2010-01-01","2010-01-01","2010-01-01","2010-01-01","2010-01-01"]},"markers":null,"annotations":null,"offset":"silhouette","interactive":true,"interpolate":"cardinal","palette":["#D55E00","#FF0000","#E69F00","#FFFFFF","#76EEC6","#B9E77C","#56B4E9","#009E73","#104E8B"],"text":"black","tooltip":"black","x_tick_interval":50,"x_tick_units":"year","x_tick_format":"%Y","y_tick_count":5,"y_tick_format":",g","top":20,"right":40,"bottom":30,"left":50,"legend":true,"legend_label":"Regions","fill":"manual","label_col":"black","x_scale":"date","sort":true,"order":"none"},"evals":[],"jsHooks":[]}</script>
</div>
<div style="margin:auto;text-align:center">
<strong>GDP per capita</strong>
<br/>
<div id="htmlwidget-dc18c7d022b9b85428c0" class="streamgraph html-widget" style="width:960px;height:500px;"></div>
<div id="htmlwidget-dc18c7d022b9b85428c0-legend" style="width:960" class="streamgraph html-widget-legend"><center><label style='padding-right:5px' for='htmlwidget-dc18c7d022b9b85428c0-select'></label><select id='htmlwidget-dc18c7d022b9b85428c0-select' style='visibility:hidden;'></select></center></div>
<script type="application/json" data-for="htmlwidget-dc18c7d022b9b85428c0">{"x":{"data":{"key":["3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada"],"value":[800,929,1089,953,974,1174,818,2307,2513,800,929,900,1081,1000,1225,985,2678,3474,800,850,989,1319,1165,1498,1575,3301,4647,850,994,1086,1751,1300,2212,2700,4724,7741,950,1117,1160,2331,900,2241,1343,4884,9741,1323,1070,1122,3713,2393,3351,4082,7263,14773,1574,1295,1735,4751,3110,4386,5779,10974,17472,1958,1546,3042,6286,4801,5952,8241,16161,23210,2026,1897,4212,8728,6742,7233,9933,20950,28787,1801,2574,6121,8132,6435,8222,10344,25440,35619,1981,3437,8164,10225,9640,9915,8986,32536,44329,3156,5367,12853,13453,16716,13179,17021,37318,48090],"date":["1820-01-01","1820-01-01","1820-01-01","1820-01-01","1820-01-01","1820-01-01","1820-01-01","1820-01-01","1820-01-01","1850-01-01","1850-01-01","1850-01-01","1850-01-01","1850-01-01","1850-01-01","1850-01-01","1850-01-01","1850-01-01","1870-01-01","1870-01-01","1870-01-01","1870-01-01","1870-01-01","1870-01-01","1870-01-01","1870-01-01","1870-01-01","1900-01-01","1900-01-01","1900-01-01","1900-01-01","1900-01-01","1900-01-01","1900-01-01","1900-01-01","1900-01-01","1920-01-01","1920-01-01","1920-01-01","1920-01-01","1920-01-01","1920-01-01","1920-01-01","1920-01-01","1920-01-01","1950-01-01","1950-01-01","1950-01-01","1950-01-01","1950-01-01","1950-01-01","1950-01-01","1950-01-01","1950-01-01","1960-01-01","1960-01-01","1960-01-01","1960-01-01","1960-01-01","1960-01-01","1960-01-01","1960-01-01","1960-01-01","1970-01-01","1970-01-01","1970-01-01","1970-01-01","1970-01-01","1970-01-01","1970-01-01","1970-01-01","1970-01-01","1980-01-01","1980-01-01","1980-01-01","1980-01-01","1980-01-01","1980-01-01","1980-01-01","1980-01-01","1980-01-01","1990-01-01","1990-01-01","1990-01-01","1990-01-01","1990-01-01","1990-01-01","1990-01-01","1990-01-01","1990-01-01","2000-01-01","2000-01-01","2000-01-01","2000-01-01","2000-01-01","2000-01-01","2000-01-01","2000-01-01","2000-01-01","2010-01-01","2010-01-01","2010-01-01","2010-01-01","2010-01-01","2010-01-01","2010-01-01","2010-01-01","2010-01-01"]},"markers":null,"annotations":null,"offset":"silhouette","interactive":true,"interpolate":"cardinal","palette":["#D55E00","#FF0000","#E69F00","#FFFFFF","#76EEC6","#B9E77C","#56B4E9","#009E73","#104E8B"],"text":"black","tooltip":"black","x_tick_interval":50,"x_tick_units":"year","x_tick_format":"%Y","y_tick_count":5,"y_tick_format":",g","top":20,"right":40,"bottom":30,"left":50,"legend":true,"legend_label":"GDP","fill":"manual","label_col":"black","x_scale":"date","sort":true,"order":"none"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>While simple, the streamgraph allows us to see a story with clarity. While the growth of GDP per capita and the decline of extreme poverty are clearly related, we get to appreciate also the persistence of extreme poverty in the Global South as well as the disproportionate “growth” of GDP per capita in the Global North.</p>
<h2 id="bare-naked-story-but-with-jewellery">Bare naked story, but with jewellery</h2>
<p>Even though the simplicity of the graph enhances the storytelling aspect, there are some key features that make a graph comprehensible without the need of explanations:</p>
<ul>
<li>We aim to add proper titleling, with subtitles explaining the different regions and indicating their colour and a caption for additional information and source indication.</li>
<li>We take away the y axis indications, as it has has different values for each graph and is difficult to read, while not adding clarification to the story.</li>
<li>We add vertical date markers, for the milestone years where the Global South’s or the Global North’s extreme poverty line fell below 10%, as well as a marker for the Global Average.</li>
</ul>
<p>To include these features and combine the streamgraphs into a single figure, we modify our plotting approach. First, we continue plotting the streamgraphs with <code>streamgraph</code>, which generates an interactive HTML based visualisation. Then, we layer our desired elements by embedding the visualisation into a custom layout using HTML and CSS. In particular the <code>htmltools</code>package is put into action.</p>
<p>First we find out the milestone years were extreme poverty dropped below 10% on average for the Global South and Global North.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/rstudio/htmltools'>htmltools</a></span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># grouping by regions </span></span>
<span><span class='va'>data_impr_sg</span> <span class='op'>&lt;-</span> <span class='va'>data_impr_sg</span> <span class='op'>|&gt;</span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span></span>
<span>    group <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/case_when.html'>case_when</a></span><span class='op'>(</span></span>
<span>      <span class='va'>region</span> <span class='op'><a href='https://rdrr.io/r/base/match.html'>%in%</a></span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Western Europe"</span>, <span class='st'>"Eastern Europe"</span>, <span class='st'>"Australia, New Zealand, USA and Canada"</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>"Global North"</span>,</span>
<span>      <span class='va'>region</span> <span class='op'><a href='https://rdrr.io/r/base/match.html'>%in%</a></span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"East Asia"</span>, <span class='st'>"Middle East and North Africa"</span>, <span class='st'>"Sub-Saharan Africa"</span>, </span>
<span>                    <span class='st'>"South and Southeast Asia"</span>, <span class='st'>"Latin America and Caribbean"</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>"Global South"</span>,</span>
<span>      <span class='cn'>TRUE</span> <span class='op'>~</span> <span class='st'>"Global Average"</span></span>
<span>    <span class='op'>)</span></span>
<span>  <span class='op'>)</span></span>
<span></span>
<span><span class='va'>data_impr_sg</span> <span class='op'>|&gt;</span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>poverty</span> <span class='op'>&lt;</span> <span class='fl'>10</span><span class='op'>)</span> <span class='op'>|&gt;</span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>group</span><span class='op'>)</span> <span class='op'>|&gt;</span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>earliest_year <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span><span class='op'>(</span><span class='va'>YEAR</span><span class='op'>)</span>,</span>
<span>            latest_year <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span><span class='op'>(</span><span class='va'>YEAR</span><span class='op'>)</span>, </span>
<span>            mean_year <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>YEAR</span><span class='op'>)</span>,</span>
<span>            .groups <span class='op'>=</span> <span class='st'>"drop"</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code># A tibble: 2 × 4
  group        earliest_year latest_year mean_year
  &lt;chr&gt;                &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;
1 Global North          1900        2010     1976.
2 Global South          1990        2010     2002.</code></pre>
</div>
<p>With this information we create the graph:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># streamgraphs </span></span>
<span><span class='va'>sg2_poverty</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/streamgraph/man/streamgraph.html'>streamgraph</a></span><span class='op'>(</span></span>
<span>  <span class='va'>data_impr_sg</span>, </span>
<span>  key <span class='op'>=</span> <span class='st'>"region_prefix"</span>, </span>
<span>  value <span class='op'>=</span> <span class='st'>"poverty"</span>, </span>
<span>  date <span class='op'>=</span> <span class='st'>"YEAR"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://rdrr.io/pkg/streamgraph/man/sg_axis_x.html'>sg_axis_x</a></span><span class='op'>(</span>tick_interval <span class='op'>=</span> <span class='fl'>50</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://rdrr.io/pkg/streamgraph/man/sg_axis_y.html'>sg_axis_y</a></span><span class='op'>(</span>tick_count <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://rdrr.io/pkg/streamgraph/man/sg_fill_manual.html'>sg_fill_manual</a></span><span class='op'>(</span><span class='va'>cb_colors_ordered</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://rdrr.io/pkg/streamgraph/man/sg_title.html'>sg_title</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Extreme Poverty"</span><span class='op'>)</span> </span>
<span></span>
<span><span class='va'>sg2_gdp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/streamgraph/man/streamgraph.html'>streamgraph</a></span><span class='op'>(</span></span>
<span>  <span class='va'>data_impr_sg</span>, </span>
<span>  key<span class='op'>=</span><span class='st'>"region_prefix"</span>, </span>
<span>  value<span class='op'>=</span><span class='st'>"GDP"</span>, </span>
<span>  date<span class='op'>=</span><span class='st'>"YEAR"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://rdrr.io/pkg/streamgraph/man/sg_axis_x.html'>sg_axis_x</a></span><span class='op'>(</span>tick_interval <span class='op'>=</span> <span class='fl'>50</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://rdrr.io/pkg/streamgraph/man/sg_axis_y.html'>sg_axis_y</a></span><span class='op'>(</span>tick_count <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://rdrr.io/pkg/streamgraph/man/sg_fill_manual.html'>sg_fill_manual</a></span><span class='op'>(</span><span class='va'>cb_colors_ordered</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://rdrr.io/pkg/streamgraph/man/sg_title.html'>sg_title</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"GDP per capita"</span><span class='op'>)</span> </span>
<span></span>
<span><span class='co'># HTML layering and combination </span></span>
<span><span class='va'>streamgraph_layout</span> <span class='op'>&lt;-</span> <span class='va'>tags</span><span class='op'>$</span><span class='fu'>div</span><span class='op'>(</span></span>
<span>  style <span class='op'>=</span> <span class='st'>"position: relative; text-align: center; font-family:Arial, sans-serif; margin: 20px;"</span>,</span>
<span>  </span>
<span>  <span class='co'># titling </span></span>
<span>  <span class='va'>tags</span><span class='op'>$</span><span class='fu'>h2</span><span class='op'>(</span><span class='st'>"Extreme Poverty and GDP per capita comparison between Global South and Global North"</span>,</span>
<span>          style <span class='op'>=</span> <span class='st'>"font-size: 24px; font-weight: bold;"</span><span class='op'>)</span>,</span>
<span>  <span class='va'>tags</span><span class='op'>$</span><span class='fu'>h3</span><span class='op'>(</span></span>
<span>    <span class='fu'><a href='https://rstudio.github.io/htmltools/reference/HTML.html'>HTML</a></span><span class='op'>(</span><span class='st'>"World region data available for</span></span>
<span><span class='st'>          &lt;span style='color:#D55E00;'&gt;Australia, New Zealand, USA and Canada&lt;/span&gt;, </span></span>
<span><span class='st'>          &lt;span style='color:#e69f00;'&gt;Western Europe&lt;/span&gt;, </span></span>
<span><span class='st'>          &lt;span style='color:#ff0000;'&gt;Eastern Europe&lt;/span&gt;, </span></span>
<span><span class='st'>          &lt;span style='color:#000000;'&gt;Global Average&lt;/span&gt; (in white), </span></span>
<span><span class='st'>          &lt;span style='color:#56b4e9;'&gt;Middle East and North Africa&lt;/span&gt;, </span></span>
<span><span class='st'>          &lt;span style='color:#b9e77c;'&gt;Latin America and Caribbean&lt;/span&gt;, </span></span>
<span><span class='st'>          &lt;span style='color:#76eec6;'&gt;East Asia&lt;/span&gt;, </span></span>
<span><span class='st'>          &lt;span style='color:#009e73;'&gt;South and Southeast Asia&lt;/span&gt;, </span></span>
<span><span class='st'>          &lt;span style='color:#104e8b;'&gt;Sub-Saharan Africa&lt;/span&gt;."</span><span class='op'>)</span>, </span>
<span>    style <span class='op'>=</span> <span class='st'>"font-size: 14px;"</span></span>
<span>  <span class='op'>)</span>,</span>
<span>  </span>
<span>  <span class='co'># poverty streamgraph (top)</span></span>
<span>  <span class='va'>tags</span><span class='op'>$</span><span class='fu'>div</span><span class='op'>(</span></span>
<span>    style <span class='op'>=</span> <span class='st'>"position: relative; width: 100%; margin-bottom: 20px;"</span>,</span>
<span>    </span>
<span>    <span class='co'># vertical dashed lines and annotations at 1975 and 2002</span></span>
<span>    <span class='va'>tags</span><span class='op'>$</span><span class='fu'>div</span><span class='op'>(</span></span>
<span>      style <span class='op'>=</span> <span class='st'>"position: absolute; top: 0; height: 100%; width: 1px; background-color: #eb9797; </span></span>
<span><span class='st'>               border-left: 2px dashed #eb9797; left: 78%; z-index: 1;"</span> <span class='co'># 1975</span></span>
<span>    <span class='op'>)</span>,</span>
<span>    <span class='va'>tags</span><span class='op'>$</span><span class='fu'>div</span><span class='op'>(</span></span>
<span>      style <span class='op'>=</span> <span class='st'>"position: absolute; top: 0; height: 100%; width: 1px; background-color: #30918d; </span></span>
<span><span class='st'>               border-left: 2px dashed #30918d; left: 90%; z-index: 1;"</span> <span class='co'>#2002</span></span>
<span>    <span class='op'>)</span>,</span>
<span>    </span>
<span>    <span class='co'># plot</span></span>
<span>    <span class='va'>tags</span><span class='op'>$</span><span class='fu'>div</span><span class='op'>(</span></span>
<span>      <span class='va'>sg2_poverty</span>,</span>
<span>      style <span class='op'>=</span> <span class='st'>"position: relative; z-index: 2; width: 100%;"</span></span>
<span>    <span class='op'>)</span></span>
<span>  <span class='op'>)</span>,</span>
<span>  </span>
<span>  <span class='co'># GDP streamgraph (bottom)</span></span>
<span>  <span class='va'>tags</span><span class='op'>$</span><span class='fu'>div</span><span class='op'>(</span></span>
<span>    style <span class='op'>=</span> <span class='st'>"position: relative; width: 100%; margin-top: 20px;"</span>,</span>
<span>    </span>
<span>      <span class='va'>tags</span><span class='op'>$</span><span class='fu'>div</span><span class='op'>(</span></span>
<span>      style <span class='op'>=</span> <span class='st'>"position: absolute; top: 0; height: 100%; width: 1px; background-color: #eb9797; </span></span>
<span><span class='st'>               border-left: 2px dashed #eb9797; left: 78%; z-index: 1;"</span> <span class='co'># 1975</span></span>
<span>    <span class='op'>)</span>,</span>
<span>    <span class='va'>tags</span><span class='op'>$</span><span class='fu'>div</span><span class='op'>(</span></span>
<span>      style <span class='op'>=</span> <span class='st'>"position: absolute; top: 0; height: 100%; width: 1px; background-color: #30918d; </span></span>
<span><span class='st'>               border-left: 2px dashed #30918d; left: 90%; z-index: 1;"</span> <span class='co'>#2002</span></span>
<span>    <span class='op'>)</span>,</span>
<span>    </span>
<span>    <span class='co'># plot </span></span>
<span>    <span class='va'>tags</span><span class='op'>$</span><span class='fu'>div</span><span class='op'>(</span></span>
<span>      <span class='va'>sg2_gdp</span>,</span>
<span>      style <span class='op'>=</span> <span class='st'>"position: relative; z-index: 2; width: 100%;"</span></span>
<span>    <span class='op'>)</span></span>
<span>  <span class='op'>)</span>,</span>
<span>  </span>
<span>  <span class='co'># line explanations</span></span>
<span>  <span class='va'>tags</span><span class='op'>$</span><span class='fu'>h3</span><span class='op'>(</span></span>
<span>    <span class='fu'><a href='https://rstudio.github.io/htmltools/reference/HTML.html'>HTML</a></span><span class='op'>(</span><span class='st'>"The </span></span>
<span><span class='st'>        &lt;span style='color:#eb9797;'&gt;red line&lt;/span&gt;</span></span>
<span><span class='st'>        marks 1975, when the Global North was on average below the 10% extreme poverty line, &lt;br/&gt; the </span></span>
<span><span class='st'>        &lt;span style='color:#30918d;'&gt;blue line&lt;/span&gt;</span></span>
<span><span class='st'>        marks 2002, when the Global South was on average below the 10% extreme poverty line."</span><span class='op'>)</span>,</span>
<span>    style <span class='op'>=</span> <span class='st'>"font-size: 10px;"</span></span>
<span>    <span class='op'>)</span>,</span>
<span>  </span>
<span>  <span class='co'># caption</span></span>
<span>  <span class='va'>tags</span><span class='op'>$</span><span class='fu'>hr</span><span class='op'>(</span><span class='op'>)</span>,</span>
<span>  <span class='va'>tags</span><span class='op'>$</span><span class='fu'>p</span><span class='op'>(</span></span>
<span>    <span class='va'>tags</span><span class='op'>$</span><span class='fu'>span</span><span class='op'>(</span><span class='st'>"Data source: "</span><span class='op'>)</span>,</span>
<span>    <span class='va'>tags</span><span class='op'>$</span><span class='fu'>a</span><span class='op'>(</span></span>
<span>      <span class='st'>"How was life? Volume II, OECD, 2021"</span>, </span>
<span>      href <span class='op'>=</span> <span class='st'>"https://www.oecd.org/en/publications/how-was-life-volume-ii_3d96efc5-en/full-report/component-14.html#chapter-d1e59754"</span>, </span>
<span>      target <span class='op'>=</span> <span class='st'>"_blank"</span>, <span class='co'># opens the link in a new tab</span></span>
<span>      style <span class='op'>=</span> <span class='st'>"color: gray; text-decoration: underline;"</span></span>
<span>      <span class='op'>)</span>,</span>
<span>    style <span class='op'>=</span> <span class='st'>"font-size: 12px; color: gray;"</span></span>
<span>  <span class='op'>)</span></span>
<span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># rendering</span></span>
<span><span class='fu'><a href='https://rstudio.github.io/htmltools/reference/browsable.html'>browsable</a></span><span class='op'>(</span><span class='va'>streamgraph_layout</span><span class='op'>)</span></span></code></pre>
</div>
<div style="position: relative; text-align: center; font-family:Arial, sans-serif; margin: 20px;">
<h2 style="font-size: 24px; font-weight: bold;">Extreme Poverty and GDP per capita comparison between Global South and Global North</h2>
<h3 style="font-size: 14px;">World region data available for
          <span style='color:#D55E00;'>Australia, New Zealand, USA and Canada</span>, 
          <span style='color:#e69f00;'>Western Europe</span>, 
          <span style='color:#ff0000;'>Eastern Europe</span>, 
          <span style='color:#000000;'>Global Average</span> (in white), 
          <span style='color:#56b4e9;'>Middle East and North Africa</span>, 
          <span style='color:#b9e77c;'>Latin America and Caribbean</span>, 
          <span style='color:#76eec6;'>East Asia</span>, 
          <span style='color:#009e73;'>South and Southeast Asia</span>, 
          <span style='color:#104e8b;'>Sub-Saharan Africa</span>.</h3>
<div style="position: relative; width: 100%; margin-bottom: 20px;">
<div style="position: absolute; top: 0; height: 100%; width: 1px; background-color: #eb9797; &#10;               border-left: 2px dashed #eb9797; left: 78%; z-index: 1;"></div>
<div style="position: absolute; top: 0; height: 100%; width: 1px; background-color: #30918d; &#10;               border-left: 2px dashed #30918d; left: 90%; z-index: 1;"></div>
<div style="position: relative; z-index: 2; width: 100%;">
<div style="margin:auto;text-align:center">
<strong>Extreme Poverty</strong>
<br/>
<div id="htmlwidget-8b28e5b11a238a21cc66" class="streamgraph html-widget" style="width:960px;height:500px;"></div>
<div id="htmlwidget-8b28e5b11a238a21cc66-legend" style="width:960" class="streamgraph html-widget-legend"><center><label style='padding-right:5px' for='htmlwidget-8b28e5b11a238a21cc66-select'></label><select id='htmlwidget-8b28e5b11a238a21cc66-select' style='visibility:hidden;'></select></center></div>
<script type="application/json" data-for="htmlwidget-8b28e5b11a238a21cc66">{"x":{"data":{"key":["3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada"],"value":[91,69,78,85,75,77.125,91,73,55,95,69,80,84,71,72,84,65,28,93,74,80,80,68,69.125,68,59,31,91,66,76,74,59,57.375,43,41,9,87,62,77,61,55,55.75,63,38,3,70,67,82,45,33,42.25,19,21,1,67,69,66,45,34,37.5,8,11,0,62,64,64,42,26,32.75,2,2,0,63,50,46,12,17,24,3,0,1,58,47,37,17,7,21,1,0,1,50,35,29,12,3,17.875,13,0,1,41,23,17,8,1,11.875,3,1,1],"date":["1820-01-01","1820-01-01","1820-01-01","1820-01-01","1820-01-01","1820-01-01","1820-01-01","1820-01-01","1820-01-01","1850-01-01","1850-01-01","1850-01-01","1850-01-01","1850-01-01","1850-01-01","1850-01-01","1850-01-01","1850-01-01","1870-01-01","1870-01-01","1870-01-01","1870-01-01","1870-01-01","1870-01-01","1870-01-01","1870-01-01","1870-01-01","1900-01-01","1900-01-01","1900-01-01","1900-01-01","1900-01-01","1900-01-01","1900-01-01","1900-01-01","1900-01-01","1920-01-01","1920-01-01","1920-01-01","1920-01-01","1920-01-01","1920-01-01","1920-01-01","1920-01-01","1920-01-01","1950-01-01","1950-01-01","1950-01-01","1950-01-01","1950-01-01","1950-01-01","1950-01-01","1950-01-01","1950-01-01","1960-01-01","1960-01-01","1960-01-01","1960-01-01","1960-01-01","1960-01-01","1960-01-01","1960-01-01","1960-01-01","1970-01-01","1970-01-01","1970-01-01","1970-01-01","1970-01-01","1970-01-01","1970-01-01","1970-01-01","1970-01-01","1980-01-01","1980-01-01","1980-01-01","1980-01-01","1980-01-01","1980-01-01","1980-01-01","1980-01-01","1980-01-01","1990-01-01","1990-01-01","1990-01-01","1990-01-01","1990-01-01","1990-01-01","1990-01-01","1990-01-01","1990-01-01","2000-01-01","2000-01-01","2000-01-01","2000-01-01","2000-01-01","2000-01-01","2000-01-01","2000-01-01","2000-01-01","2010-01-01","2010-01-01","2010-01-01","2010-01-01","2010-01-01","2010-01-01","2010-01-01","2010-01-01","2010-01-01"]},"markers":null,"annotations":null,"offset":"silhouette","interactive":true,"interpolate":"cardinal","palette":["#D55E00","#FF0000","#E69F00","#FFFFFF","#76EEC6","#B9E77C","#56B4E9","#009E73","#104E8B"],"text":"black","tooltip":"black","x_tick_interval":50,"x_tick_units":"year","x_tick_format":"%Y","y_tick_count":0,"y_tick_format":",g","top":20,"right":40,"bottom":30,"left":50,"legend":false,"legend_label":"","fill":"manual","label_col":"black","x_scale":"date","sort":true,"order":"none"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<div style="position: relative; width: 100%; margin-top: 20px;">
<div style="position: absolute; top: 0; height: 100%; width: 1px; background-color: #eb9797; &#10;               border-left: 2px dashed #eb9797; left: 78%; z-index: 1;"></div>
<div style="position: absolute; top: 0; height: 100%; width: 1px; background-color: #30918d; &#10;               border-left: 2px dashed #30918d; left: 90%; z-index: 1;"></div>
<div style="position: relative; z-index: 2; width: 100%;">
<div style="margin:auto;text-align:center">
<strong>GDP per capita</strong>
<br/>
<div id="htmlwidget-d67202108ae05f2c2a27" class="streamgraph html-widget" style="width:960px;height:500px;"></div>
<div id="htmlwidget-d67202108ae05f2c2a27-legend" style="width:960" class="streamgraph html-widget-legend"><center><label style='padding-right:5px' for='htmlwidget-d67202108ae05f2c2a27-select'></label><select id='htmlwidget-d67202108ae05f2c2a27-select' style='visibility:hidden;'></select></center></div>
<script type="application/json" data-for="htmlwidget-d67202108ae05f2c2a27">{"x":{"data":{"key":["3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada","3. Sub-Saharan Africa","3. South and Southeast Asia","3. East Asia","3. Latin America and Caribbean","3. Middle East and North Africa","2. Global Average","1. Eastern Europe","1. Western Europe","1. Australia, New Zealand, USA and Canada"],"value":[800,929,1089,953,974,1174,818,2307,2513,800,929,900,1081,1000,1225,985,2678,3474,800,850,989,1319,1165,1498,1575,3301,4647,850,994,1086,1751,1300,2212,2700,4724,7741,950,1117,1160,2331,900,2241,1343,4884,9741,1323,1070,1122,3713,2393,3351,4082,7263,14773,1574,1295,1735,4751,3110,4386,5779,10974,17472,1958,1546,3042,6286,4801,5952,8241,16161,23210,2026,1897,4212,8728,6742,7233,9933,20950,28787,1801,2574,6121,8132,6435,8222,10344,25440,35619,1981,3437,8164,10225,9640,9915,8986,32536,44329,3156,5367,12853,13453,16716,13179,17021,37318,48090],"date":["1820-01-01","1820-01-01","1820-01-01","1820-01-01","1820-01-01","1820-01-01","1820-01-01","1820-01-01","1820-01-01","1850-01-01","1850-01-01","1850-01-01","1850-01-01","1850-01-01","1850-01-01","1850-01-01","1850-01-01","1850-01-01","1870-01-01","1870-01-01","1870-01-01","1870-01-01","1870-01-01","1870-01-01","1870-01-01","1870-01-01","1870-01-01","1900-01-01","1900-01-01","1900-01-01","1900-01-01","1900-01-01","1900-01-01","1900-01-01","1900-01-01","1900-01-01","1920-01-01","1920-01-01","1920-01-01","1920-01-01","1920-01-01","1920-01-01","1920-01-01","1920-01-01","1920-01-01","1950-01-01","1950-01-01","1950-01-01","1950-01-01","1950-01-01","1950-01-01","1950-01-01","1950-01-01","1950-01-01","1960-01-01","1960-01-01","1960-01-01","1960-01-01","1960-01-01","1960-01-01","1960-01-01","1960-01-01","1960-01-01","1970-01-01","1970-01-01","1970-01-01","1970-01-01","1970-01-01","1970-01-01","1970-01-01","1970-01-01","1970-01-01","1980-01-01","1980-01-01","1980-01-01","1980-01-01","1980-01-01","1980-01-01","1980-01-01","1980-01-01","1980-01-01","1990-01-01","1990-01-01","1990-01-01","1990-01-01","1990-01-01","1990-01-01","1990-01-01","1990-01-01","1990-01-01","2000-01-01","2000-01-01","2000-01-01","2000-01-01","2000-01-01","2000-01-01","2000-01-01","2000-01-01","2000-01-01","2010-01-01","2010-01-01","2010-01-01","2010-01-01","2010-01-01","2010-01-01","2010-01-01","2010-01-01","2010-01-01"]},"markers":null,"annotations":null,"offset":"silhouette","interactive":true,"interpolate":"cardinal","palette":["#D55E00","#FF0000","#E69F00","#FFFFFF","#76EEC6","#B9E77C","#56B4E9","#009E73","#104E8B"],"text":"black","tooltip":"black","x_tick_interval":50,"x_tick_units":"year","x_tick_format":"%Y","y_tick_count":0,"y_tick_format":",g","top":20,"right":40,"bottom":30,"left":50,"legend":false,"legend_label":"","fill":"manual","label_col":"black","x_scale":"date","sort":true,"order":"none"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<h3 style="font-size: 10px;">The 
        <span style='color:#eb9797;'>red line</span>
        marks 1975, when the Global North was on average below the 10% extreme poverty line, <br/> the 
        <span style='color:#30918d;'>blue line</span>
        marks 2002, when the Global South was on average below the 10% extreme poverty line.</h3>
<hr/>
<p style="font-size: 12px; color: gray;">
<span>Data source: </span>
<a href="https://www.oecd.org/en/publications/how-was-life-volume-ii_3d96efc5-en/full-report/component-14.html#chapter-d1e59754" target="_blank" style="color: gray; text-decoration: underline;">How was life? Volume II, OECD, 2021</a>
</p>
</div>
</div>
<h2 id="gg-plot-it">GG plot it</h2>
<p>For conveniance, We can do the same work in ggplot. for this, we prepare the data in long format, facet and add our custom features. While we lose the style of the streamgraph, we gain the workability of ggplot.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># combine Poverty and GDP into one dataset</span></span>
<span><span class='va'>data_impr_gg</span> <span class='op'>&lt;-</span> <span class='va'>data_impr_sg</span> <span class='op'>|&gt;</span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>region_ordered</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>|&gt;</span> </span>
<span>  <span class='fu'><a href='https://tidyr.tidyverse.org/reference/pivot_longer.html'>pivot_longer</a></span><span class='op'>(</span>cols <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"poverty"</span>, <span class='st'>"GDP"</span><span class='op'>)</span>, </span>
<span>               names_to <span class='op'>=</span> <span class='st'>"metric"</span>, </span>
<span>               values_to <span class='op'>=</span> <span class='st'>"value"</span><span class='op'>)</span> <span class='op'>|&gt;</span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>metric <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/recode.html'>recode</a></span><span class='op'>(</span><span class='va'>metric</span>,</span>
<span>                         <span class='st'>"GDP"</span> <span class='op'>=</span> <span class='st'>"GDP per capita"</span>,</span>
<span>                         <span class='st'>"poverty"</span> <span class='op'>=</span> <span class='st'>"Extreme Poverty"</span><span class='op'>)</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># titling</span></span>
<span><span class='va'>graph_title</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Extreme Poverty and GDP per capita,\ncomparison between"</span>, </span>
<span>                       <span class='st'>"Global South and Global North"</span></span>
<span>                       <span class='op'>)</span>, collapse<span class='op'>=</span><span class='st'>" "</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>graph_subtitle</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span></span>
<span>  <span class='st'>"&lt;span style='text-indent: 0; margin-left: 0;'&gt;World region data available for"</span>,</span>
<span>  <span class='st'>"&lt;span style='color:#D55E00;'&gt;Australia, New Zealand, USA and Canada&lt;/span&gt;,"</span>,</span>
<span>  <span class='st'>"&lt;span style='color:#e69f00;'&gt;Western Europe&lt;/span&gt;,&lt;br&gt;"</span>,</span>
<span>  <span class='st'>"&lt;span style='text-indent: 0; margin-left: 0;'&gt;&lt;span style='color:#ff0000;'&gt;Eastern Europe&lt;/span&gt;,"</span>,</span>
<span>  <span class='st'>"&lt;span style='color:#000000;'&gt;Global Average&lt;/span&gt; (in white),"</span>,</span>
<span>  <span class='st'>"&lt;span style='color:#56b4e9;'&gt;Middle East and North Africa&lt;/span&gt;,&lt;br&gt;"</span>, </span>
<span>  <span class='st'>"&lt;span style='text-indent: 0; margin-left: 0;'&gt;&lt;span style='color:#b9e77c;'&gt;Latin America and Caribbean&lt;/span&gt;,"</span>,</span>
<span>  <span class='st'>"&lt;span style='color:#76eec6;'&gt;East Asia&lt;/span&gt;,"</span>, </span>
<span>  <span class='st'>"&lt;span style='color:#009e73;'&gt;South and Southeast Asia&lt;/span&gt; and&lt;br&gt;"</span>,</span>
<span>  <span class='st'>"&lt;span style='text-indent: 0; margin-left: 0; color:#104e8b;'&gt;Sub-Saharan Africa&lt;/span&gt;."</span></span>
<span><span class='op'>)</span>, collapse <span class='op'>=</span> <span class='st'>" "</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>graph_caption</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"&lt;span style='text-indent: 0; margin-left: 0;'&gt;The"</span>,  </span>
<span>        <span class='st'>"&lt;span style='color:#eb9797;'&gt;pink line&lt;/span&gt; marks 1975,"</span>, </span>
<span>        <span class='st'>"when the Global North was on average below the 10% extreme poverty line, &lt;br&gt;"</span>,</span>
<span>        <span class='st'>"&lt;span style='text-indent: 0; margin-left: 0;'&gt;the &lt;span style='color:#30918d;'&gt;blue line&lt;/span&gt;</span></span>
<span><span class='st'>        marks 2002,"</span>, </span>
<span>        <span class='st'>"when the Global South was on average below the 10% extreme poverty line."</span><span class='op'>)</span>, collapse <span class='op'>=</span> <span class='st'>" "</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>graph_tag</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>"Data source: How was life? Volume II, OECD, 2021"</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># visuals</span></span>
<span><span class='fu'>sysfonts</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/sysfonts/man/font_add_google.html'>font_add_google</a></span><span class='op'>(</span><span class='st'>"Lora"</span>, family <span class='op'>=</span> <span class='st'>"lora"</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>legend</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span></span>
<span>  region <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Sub-Saharan Africa"</span>,</span>
<span>             <span class='st'>"South and Southeast Asia"</span>, </span>
<span>             <span class='st'>"East Asia"</span>, </span>
<span>             <span class='st'>"Latin America and Caribbean"</span>, </span>
<span>             <span class='st'>"Middle East and North Africa"</span>, </span>
<span>             <span class='st'>"Global Average"</span>, </span>
<span>             <span class='st'>"Eastern Europe"</span>, </span>
<span>             <span class='st'>"Western Europe"</span>, </span>
<span>             <span class='st'>"Australia, New Zealand, USA and Canada"</span><span class='op'>)</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># plot</span></span>
<span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>data_impr_gg</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>YEAR</span>, y <span class='op'>=</span> <span class='va'>value</span>, fill <span class='op'>=</span> <span class='va'>region_prefix</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_ribbon.html'>geom_area</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_wrap.html'>facet_wrap</a></span><span class='op'>(</span><span class='op'>~</span> <span class='va'>metric</span>, ncol <span class='op'>=</span> <span class='fl'>1</span>, scales <span class='op'>=</span> <span class='st'>"free_y"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_abline.html'>geom_vline</a></span><span class='op'>(</span>xintercept <span class='op'>=</span> <span class='fl'>1975</span>, linetype <span class='op'>=</span> <span class='st'>"dashed"</span>, colour <span class='op'>=</span> <span class='st'>"#eb9797"</span><span class='op'>)</span> <span class='op'>+</span> </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_abline.html'>geom_vline</a></span><span class='op'>(</span>xintercept <span class='op'>=</span> <span class='fl'>2002</span>, linetype <span class='op'>=</span> <span class='st'>"dashed"</span>, colour <span class='op'>=</span> <span class='st'>"#30918d"</span><span class='op'>)</span> <span class='op'>+</span> </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='va'>cb_colors_ordered</span>, labels <span class='op'>=</span> <span class='va'>legend</span><span class='op'>$</span><span class='va'>region</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='va'>graph_title</span>, </span>
<span>       subtitle <span class='op'>=</span> <span class='va'>graph_subtitle</span>,</span>
<span>       caption <span class='op'>=</span> <span class='va'>graph_caption</span>,</span>
<span>       tag <span class='op'>=</span> <span class='va'>graph_tag</span>,</span>
<span>       x <span class='op'>=</span> <span class='st'>"Year"</span>,</span>
<span>       y <span class='op'>=</span> <span class='cn'>NULL</span></span>
<span>       <span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/guides.html'>guides</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/guide_legend.html'>guide_legend</a></span><span class='op'>(</span>nrow <span class='op'>=</span> <span class='fl'>3</span>, ncol <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span></span>
<span>    strip.text <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>family <span class='op'>=</span> <span class='st'>"lora"</span>, </span>
<span>                              face <span class='op'>=</span> <span class='st'>"italic"</span>, </span>
<span>                              colour <span class='op'>=</span> <span class='st'>"#939292"</span>, </span>
<span>                              hjust <span class='op'>=</span> <span class='fl'>0.55</span>, </span>
<span>                              margin <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span>b <span class='op'>=</span> <span class='op'>-</span><span class='fl'>7</span><span class='op'>)</span><span class='op'>)</span>, </span>
<span>    plot.title <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>family <span class='op'>=</span> <span class='st'>"playfair display"</span>, </span>
<span>                              size <span class='op'>=</span> <span class='fl'>16</span>, </span>
<span>                              margin <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span>b <span class='op'>=</span> <span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>, </span>
<span>    plot.title.position <span class='op'>=</span> <span class='st'>"plot"</span>,</span>
<span>    plot.subtitle <span class='op'>=</span> <span class='fu'><a href='https://wilkelab.org/ggtext/reference/element_markdown.html'>element_markdown</a></span><span class='op'>(</span>family <span class='op'>=</span> <span class='st'>"lora"</span>, </span>
<span>                                     size <span class='op'>=</span> <span class='fl'>10</span>,</span>
<span>                                     lineheight <span class='op'>=</span> <span class='fl'>1.3</span>,</span>
<span>                                     margin <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span>b <span class='op'>=</span> <span class='fl'>12</span><span class='op'>)</span></span>
<span>                                     <span class='op'>)</span>, </span>
<span>    plot.caption <span class='op'>=</span> <span class='fu'><a href='https://wilkelab.org/ggtext/reference/element_markdown.html'>element_markdown</a></span><span class='op'>(</span>family <span class='op'>=</span> <span class='st'>"lora"</span>, </span>
<span>                                    colour <span class='op'>=</span> <span class='st'>"black"</span>,</span>
<span>                                    size <span class='op'>=</span> <span class='fl'>9.7</span>, </span>
<span>                                    hjust <span class='op'>=</span> <span class='fl'>0</span>, </span>
<span>                                    lineheight <span class='op'>=</span> <span class='fl'>1.3</span>,</span>
<span>                                    margin <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span>t <span class='op'>=</span> <span class='fl'>12</span><span class='op'>)</span></span>
<span>                                    <span class='op'>)</span>,</span>
<span>    plot.caption.position <span class='op'>=</span> <span class='st'>"panel"</span>,        </span>
<span>    plot.tag <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>family <span class='op'>=</span> <span class='st'>"lora"</span>,</span>
<span>                            colour <span class='op'>=</span> <span class='st'>"#939292"</span>,</span>
<span>                            size <span class='op'>=</span> <span class='fl'>8</span>, </span>
<span>                            hjust <span class='op'>=</span> <span class='fl'>1</span>, </span>
<span>                            vjust <span class='op'>=</span> <span class='fl'>1</span>, </span>
<span>                            margin <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span> <span class='op'>(</span>t <span class='op'>=</span> <span class='fl'>12</span><span class='op'>)</span></span>
<span>                            <span class='op'>)</span>,</span>
<span>    plot.tag.position <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>0</span><span class='op'>)</span>, </span>
<span>    legend.title <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span>, </span>
<span>    legend.text <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>family <span class='op'>=</span> <span class='st'>"lora"</span><span class='op'>)</span>,</span>
<span>    legend.background <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_rect</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='cn'>NULL</span>, colour <span class='op'>=</span> <span class='st'>"#888888"</span>, linetype <span class='op'>=</span> <span class='st'>"dotted"</span><span class='op'>)</span>,</span>
<span>    legend.key.size <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/grid/unit.html'>unit</a></span><span class='op'>(</span><span class='fl'>0.5</span>, <span class='st'>"lines"</span><span class='op'>)</span>,</span>
<span>    legend.spacing.x <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/grid/unit.html'>unit</a></span><span class='op'>(</span><span class='fl'>0.2</span>, <span class='st'>"cm"</span><span class='op'>)</span>,</span>
<span>    legend.position <span class='op'>=</span> <span class='st'>"bottom"</span>, </span>
<span>    axis.title <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span>,</span>
<span>    axis.text.x <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>family <span class='op'>=</span> <span class='st'>"lora"</span>, colour <span class='op'>=</span> <span class='st'>"#939292"</span><span class='op'>)</span>,</span>
<span>    axis.text.y <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span>, </span>
<span>    panel.spacing.y <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/grid/unit.html'>unit</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='st'>"lines"</span><span class='op'>)</span>, </span>
<span>    panel.grid.minor <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span>, </span>
<span>    plot.margin <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span>b <span class='op'>=</span> <span class='fl'>19</span><span class='op'>)</span></span>
<span>  <span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/coord_cartesian.html'>coord_cartesian</a></span><span class='op'>(</span>clip <span class='op'>=</span> <span class='st'>"off"</span><span class='op'>)</span> </span></code></pre>
</div>
<p><img src="100546612_files/figure-html5/unnamed-chunk-8-1.png" width="624" /></p>
</div>
<p>In summary, this article has delved into the process of replicating and improving a graph which delt with the issues of extreme poverty and income per capita. We have seen that what initially seems like a straightforward chart often demands substantial effort to fine-tune each detail, as well as the critical role of intentional data visualisation. The alternative visualisations have illustrates how refining the graph through iterations can significantly change the narrative portrayed and change the course of focus and interpretation.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr />
<ol>
<li id="fn1"><p>Reality check! The reason why I decided to include this final processing of the data in the replication process and not the data cleaning process is due to the importance I attribute to the active replication process in showing me, and me figuring out during it, what the problems were with the data. The <em>replication process is not a straightforward task, but it involves a lot of back and forth</em>, which I believe is important to pay attention to.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Reality check! I call this the second starting point as if it is done nearer the end of the replication, while the code would be correct, the time that will need to be invested in changing the exact coordinates, widths, lengths, etc of the different functions <em>will have the effect of making the replication process seem like going back to square one</em>. Hence, instead of taking double the time, I recommend setting the dimensions early on!<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Based on <a href="https://en.wikipedia.org/wiki/Global_North_and_Global_South">Wikipedia’s article on Global South and North</a>, which is based on the UN’s trade and development classification of <a href="https://unctadstat.unctad.org/EN/Classifications.html">Groups of economies</a>.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
