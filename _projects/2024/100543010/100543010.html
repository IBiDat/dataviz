<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { color: #00769e; background-color: #f1f3f5; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #00769e; } /* Normal */
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #657422; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #00769e; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #00769e; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #00769e; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
  <title>Key Global Partners in U.S. Trade for 2023</title>

  <meta property="description" itemprop="description" content="Worldwide U.S. Trade in Billions by country in 2023"/>


  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2024-12-16"/>
  <meta property="article:created" itemprop="dateCreated" content="2024-12-16"/>
  <meta name="article:author" content="Jason Brunner"/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="Key Global Partners in U.S. Trade for 2023"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="Worldwide U.S. Trade in Billions by country in 2023"/>
  <meta property="og:locale" content="en_US"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="Key Global Partners in U.S. Trade for 2023"/>
  <meta property="twitter:description" content="Worldwide U.S. Trade in Billions by country in 2023"/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","categories","author","date","output"]}},"value":[{"type":"character","attributes":{},"value":["Key Global Partners in U.S. Trade for 2023"]},{"type":"character","attributes":{},"value":["Worldwide U.S. Trade in Billions by country in 2023\n"]},{"type":"character","attributes":{},"value":["2024"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name"]}},"value":[{"type":"character","attributes":{},"value":["Jason Brunner"]}]}]},{"type":"character","attributes":{},"value":["2024-12-16"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc","toc_float"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[true]}]}]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["100543010_files/anchor-4.2.2/anchor.min.js","100543010_files/bowser-1.9.3/bowser.min.js","100543010_files/distill-2.2.21/template.v2.js","100543010_files/figure-html5/unnamed-chunk-10-1.png","100543010_files/figure-html5/unnamed-chunk-11-1.png","100543010_files/figure-html5/unnamed-chunk-11-2.png","100543010_files/figure-html5/unnamed-chunk-5-1.png","100543010_files/figure-html5/unnamed-chunk-6-1.png","100543010_files/figure-html5/unnamed-chunk-7-1.png","100543010_files/header-attrs-2.29/header-attrs.js","100543010_files/jquery-3.6.0/jquery-3.6.0.js","100543010_files/jquery-3.6.0/jquery-3.6.0.min.js","100543010_files/jquery-3.6.0/jquery-3.6.0.min.map","100543010_files/popper-2.6.0/popper.min.js","100543010_files/tippy-6.2.7/tippy-bundle.umd.min.js","100543010_files/tippy-6.2.7/tippy-light-border.css","100543010_files/tippy-6.2.7/tippy.css","100543010_files/tippy-6.2.7/tippy.umd.min.js","100543010_files/webcomponents-2.0.0/webcomponents.js"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
    font-size: 100%;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  hr.section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    margin: 0px;
  }


  d-byline {
    border-top: none;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
    border-top: none;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  /* tweak for Pandoc numbered line within distill */
  d-article pre.numberSource code > span {
      left: -2em;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // separator
    var separator = '<hr class="section-separator" style="clear: both"/>';
    // prepend separator above appendix
    $('.d-byline').before(separator);
    $('.d-article').before(separator);

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme, except when numbering line
    // in code chunk
    $('pre:not(.numberLines) code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        var author_name = front_matter.authors[i].author
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', author_name ? 'ORCID ID for ' + author_name : 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        const citeChild = $(this).children()[0]
        // Do not process if @xyz has been used without escaping and without bibliography activated
        // https://github.com/rstudio/distill/issues/466
        if (citeChild === undefined) return true

        if (citeChild.nodeName == "D-FOOTNOTE") {
          var fn = citeChild
          $(this).html(fn.shadowRoot.querySelector("sup"))
          $(this).id = fn.id
          fn.remove()
        }
        var refs = $(this).attr('data-cites').split(" ");
        var refHtml = refs.map(function(ref) {
          // Could use CSS.escape too here, we insure backward compatibility in navigator
          return "<p>" + $('div[id="ref-' + ref + '"]').html() + "</p>";
        }).join("\n");
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // fix footnotes in tables (#411)
      // replacing broken distill.pub feature
      $('table d-footnote').each(function() {
        // we replace internal showAtNode methode which is triggered when hovering a footnote
        this.hoverBox.showAtNode = function(node) {
          // ported from https://github.com/distillpub/template/pull/105/files
          calcOffset = function(elem) {
              let x = elem.offsetLeft;
              let y = elem.offsetTop;
              // Traverse upwards until an `absolute` element is found or `elem`
              // becomes null.
              while (elem = elem.offsetParent && elem.style.position != 'absolute') {
                  x += elem.offsetLeft;
                  y += elem.offsetTop;
              }

              return { left: x, top: y };
          }
          // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop
          const bbox = node.getBoundingClientRect();
          const offset = calcOffset(node);
          this.show([offset.left + bbox.width, offset.top + bbox.height]);
        }
      })

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      // ignore leaflet img layers (#106)
      figures = figures.filter(':not(img[class*="leaflet"])')
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace(/^index[.]html/, "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <!--/radix_placeholder_distill-->
  <script src="100543010_files/header-attrs-2.29/header-attrs.js"></script>
  <script src="100543010_files/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <script src="100543010_files/popper-2.6.0/popper.min.js"></script>
  <link href="100543010_files/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="100543010_files/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="100543010_files/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="100543010_files/anchor-4.2.2/anchor.min.js"></script>
  <script src="100543010_files/bowser-1.9.3/bowser.min.js"></script>
  <script src="100543010_files/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="100543010_files/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Key Global Partners in U.S. Trade for 2023","description":"Worldwide U.S. Trade in Billions by country in 2023","authors":[{"author":"Jason Brunner","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2024-12-16T00:00:00.000+01:00","citationText":"Brunner, 2024"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Key Global Partners in U.S. Trade for 2023</h1>

<!--radix_placeholder_categories-->
<div class="dt-tags">
<div class="dt-tag">2024</div>
</div>
<!--/radix_placeholder_categories-->
<p><p>Worldwide U.S. Trade in Billions by country in 2023</p></p>
</div>

<div class="d-byline">
  
  Jason Brunner
  
<br/>2024-12-16
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#introduction" id="toc-introduction">Introduction</a></li>
<li><a href="#the-visualization" id="toc-the-visualization">The Visualization</a>
<ul>
<li><a href="#the-data" id="toc-the-data">The Data</a>
<ul>
<li><a href="#getting-the-data-and-downloading-the-packages" id="toc-getting-the-data-and-downloading-the-packages">Getting the data and downloading the packages</a></li>
</ul></li>
<li><a href="#the-map" id="toc-the-map">The map</a>
<ul>
<li><a href="#creating-the-basic-plot" id="toc-creating-the-basic-plot">Creating the basic plot</a></li>
<li><a href="#the-flag" id="toc-the-flag">The flag</a></li>
<li><a href="#the-eu-27-subplot" id="toc-the-eu-27-subplot">The EU-27 subplot</a></li>
<li><a href="#adding-them-together" id="toc-adding-them-together">Adding them together</a></li>
<li><a href="#annotations" id="toc-annotations">Annotations</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
</div>
<h1 id="introduction">Introduction</h1>
<p>The U.S. totaled over $5.1 trillion in trade for the year 2023. This is a truly
staggering amount and it poses the interesting question, which the major trade
partners are. By looking at trade through this visualization we can also see
how our wold today is globalized and connected, even in times of rising global
tensions.</p>
<p>The original visualization can be found following [this link]<a href="https://www.voronoiapp.com/economy/-Top-Global-Trading-Partners-of-the-US-in-2023-2172" class="uri">https://www.voronoiapp.com/economy/-Top-Global-Trading-Partners-of-the-US-in-2023-2172</a>).</p>
<figure>
<img src="Original%20Visualization.png" class="external" alt="Original visualization" />
<figcaption aria-hidden="true">Original visualization</figcaption>
</figure>
<h1 id="the-visualization">The Visualization</h1>
<h2 id="the-data">The Data</h2>
<h3 id="getting-the-data-and-downloading-the-packages">Getting the data and downloading the packages</h3>
<p>First we are going to start by loading the packages. For the Flagon package we
have take a little detour, since it is not available through the regular
R function. Therefore, we will download and load it at a later step.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://ggplot2.tidyverse.org'>ggplot2</a></span><span class='op'>)</span> </span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://docs.ropensci.org/rnaturalearth/'>rnaturalearth</a></span><span class='op'>)</span> </span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/yixuan/showtext'>showtext</a></span><span class='op'>)</span> </span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/yixuan/sysfonts'>sysfonts</a></span><span class='op'>)</span> </span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://readxl.tidyverse.org'>readxl</a></span><span class='op'>)</span> </span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span> </span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/trevorld/ggpattern'>ggpattern</a></span><span class='op'>)</span> </span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://devtools.r-lib.org/'>devtools</a></span><span class='op'>)</span> </span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://patchwork.data-imaginist.com'>patchwork</a></span><span class='op'>)</span> </span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://wilkelab.org/ggtext/'>ggtext</a></span><span class='op'>)</span> </span></code></pre>
</div>
</div>
<p>Luckily the data for this visualization was available and only had to be
downloaded and then transformed to be imported into R. The original data source
is cited as comtrade, U.S. Census and WTO</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>trade_data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://readxl.tidyverse.org/reference/read_excel.html'>read_excel</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>"/Users/jasonbrunner/Documents/HSG/"</span>,</span>
<span>                        <span class='st'>"HS24 inkl. Austausch/HS24 UC3M/Data Visualization/"</span>,</span>
<span>                        <span class='st'>"Final Project/Data Final Project.xlsx"</span>, sep <span class='op'>=</span> <span class='st'>""</span><span class='op'>)</span>, </span>
<span>                        col_types <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"text"</span>,<span class='st'>"numeric"</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>The dataset is already tidy data and is ready to modified for our visualization.
The <em>raw</em> trade data which we have imported before now has to be modified to fit
the trade categories displayed in our visualization and later it will be
merged with our main world dataset.</p>
<p>You might wonder, why they are split in these specific categories. The reason
is, that to then later on create the legend we can’t use a straight forward
approach and will need to become a bit creative. More about this will follow
once we reach the legend.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>trade_data</span> <span class='op'>&lt;-</span> <span class='va'>trade_data</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>trade_category <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/case_when.html'>case_when</a></span><span class='op'>(</span></span>
<span>    <span class='va'>`U.S. Trade (Billion US$)`</span> <span class='op'>&lt;</span> <span class='fl'>0.1</span> <span class='op'>~</span> <span class='st'>"0"</span>,</span>
<span>    <span class='va'>`U.S. Trade (Billion US$)`</span> <span class='op'>&lt;</span> <span class='fl'>1</span> <span class='op'>~</span> <span class='st'>"0.1"</span>, </span>
<span>    <span class='va'>`U.S. Trade (Billion US$)`</span> <span class='op'>&lt;</span> <span class='fl'>10</span> <span class='op'>~</span> <span class='st'>"1"</span>,</span>
<span>    <span class='va'>`U.S. Trade (Billion US$)`</span> <span class='op'>&lt;</span> <span class='fl'>100</span> <span class='op'>~</span> <span class='st'>"10"</span>,</span>
<span>    <span class='va'>`U.S. Trade (Billion US$)`</span> <span class='op'>&lt;</span> <span class='fl'>1000</span> <span class='op'>~</span> <span class='st'>"100"</span>,</span>
<span>    <span class='cn'>TRUE</span> <span class='op'>~</span> <span class='st'>"1000"</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<h2 id="the-map">The map</h2>
<h3 id="creating-the-basic-plot">Creating the basic plot</h3>
<p>The next step will be to focus on the actual world map. For this we take
advantage of the rnaturarearth package which provides us with a comprehensive
dataset about the world. We will also need to perform a few modifications to
better fit the original plot. As you will also notice, we filter the United
States out of the dataset. This is because the United States are filled with
the US Flag and therefore we need to exclude it momentarily from our base
dataset to be able to do this modification later.
As mentioned earlier we will now in the same step merge our trade data with the
world data we have created so we get our base dataset to then start with our
plot. Lastly we also define the colours used in the visualization. They have
been obtained by using an online tool to get the colour codes from any colour
you provide it.</p>
<p>Additionally we also need to download the font. Using an online tool we were
able to determine the font as “montserrat”. Luckily it is also available as a
free download and we can use it for our visualization.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>world</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://docs.ropensci.org/rnaturalearth/reference/ne_countries.html'>ne_countries</a></span><span class='op'>(</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>excluded_countries</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"French Southern and Antarctic Lands"</span>,<span class='st'>"Antarctica"</span>,</span>
<span>                        <span class='st'>"Falkland Islands / Malvinas"</span><span class='op'>)</span></span>
<span><span class='co'>#removing the excluded countries and the United States</span></span>
<span><span class='va'>world</span> <span class='op'>&lt;-</span> <span class='va'>world</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='va'>name_long</span> <span class='op'><a href='https://rdrr.io/r/base/match.html'>%in%</a></span> <span class='va'>excluded_countries</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='va'>name_long</span> <span class='op'><a href='https://rdrr.io/r/base/match.html'>%in%</a></span>  <span class='st'>"United States"</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'>#incorporate the trade data into to world dataset</span></span>
<span><span class='va'>world</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>left_join</a></span><span class='op'>(</span><span class='va'>world</span>, <span class='va'>trade_data</span>, by <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"name_long"</span> <span class='op'>=</span> <span class='st'>"Country"</span><span class='op'>)</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'>#defining the colours used for the map</span></span>
<span><span class='va'>colors</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"#bdbcfe"</span>, <span class='st'>"#9494cd"</span>, <span class='st'>"#6d6f9c"</span>, <span class='st'>"#49476a"</span>, <span class='st'>"#21213c"</span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/sysfonts/man/font_add_google.html'>font_add_google</a></span><span class='op'>(</span><span class='st'>"Montserrat"</span>, <span class='st'>"montserrat"</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/showtext/man/showtext_auto.html'>showtext_auto</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>Now we have everything ready to actually create the first draft of our
visualization. There is still a long way to go but we can plot the first
draft with the help of the ggplot2 package to see the map with the exclusions
and the colours for the trade data.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>X</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>world</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggsf.html'>geom_sf</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>trade_category</span><span class='op'>)</span><span class='op'>)</span>, </span>
<span>          color <span class='op'>=</span> <span class='st'>"#faf8f4"</span>, </span>
<span>          linewidth <span class='op'>=</span> <span class='fl'>0.05</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggsf.html'>coord_sf</a></span><span class='op'>(</span>crs <span class='op'>=</span> <span class='st'>"+proj=robin"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='va'>colors</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>X</span></span></code></pre>
</div>
<p><img src="100543010_files/figure-html5/unnamed-chunk-5-1.png" width="1344" style="display: block; margin: auto;" /></p>
</div>
<p>After having created our first plot we will continue enhancing it and
getting it closer to the original one. The first things that comes to mind apart
from the legend are the gridlines present in the plot and the background.
We can fix these two problems easily by adding the following lines of code
to our ggplot. In the same step we will also go ahead and add the title and
subtitle to our plot. To make the title and subtitle look right, we also
adjust the font corresponding to the original visualization. By defining this
in our theme, it will automatically be adjusted for all text elements.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>X</span> <span class='op'>&lt;-</span> <span class='va'>X</span> <span class='op'>+</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_void</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Key Global Partners in U.S. Trade for 2023"</span>, </span>
<span>       subtitle <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>"In 2023, U.S. trade totaled $5,192 billion. "</span>,</span>
<span>                        <span class='st'>"Trade with NAFTA partnes-Mexico ($803\nbillion "</span>,</span>
<span>                        <span class='st'>"and Canada ($784 billion)-accounted for 30.6% of the "</span>,</span>
<span>                        <span class='st'>"total. The European\nUnion was the next largest "</span>,</span>
<span>                        <span class='st'>"partner, contribution $986 billion, or 18.5% of total"</span>,</span>
<span>                        <span class='st'>" trade.\nTrade with China amounted to $596 billion, "</span>,</span>
<span>                        <span class='st'>"representing 11.5% of the total."</span>, sep <span class='op'>=</span> <span class='st'>""</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='co'>#now the theme is being modified to replicate the title and subtitle from the</span></span>
<span>  <span class='co'>#original plot and in the same step we also adjust the background</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>plot.title <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>hjust <span class='op'>=</span> <span class='fl'>0.5</span>, </span>
<span>                                  size <span class='op'>=</span> <span class='fl'>18</span>, </span>
<span>                                  face <span class='op'>=</span> <span class='st'>"bold"</span>, </span>
<span>                                  colour <span class='op'>=</span> <span class='st'>"#042f4a"</span><span class='op'>)</span>,</span>
<span>        plot.background <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_rect</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#faf8f4"</span><span class='op'>)</span>,</span>
<span>        plot.subtitle <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>hjust <span class='op'>=</span> <span class='fl'>0.05</span><span class='op'>)</span>,</span>
<span>        text <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>family <span class='op'>=</span> <span class='st'>"montserrat"</span><span class='op'>)</span><span class='op'>)</span></span>
<span>  </span>
<span><span class='va'>X</span></span></code></pre>
</div>
<p><img src="100543010_files/figure-html5/unnamed-chunk-6-1.png" width="1344" style="display: block; margin: auto;" /></p>
</div>
<p>Now it already looks much more familiar. Let’s not focus on the details like
positioning and font size yet, but we will look at the more important things
like the legend. First of all we need to turn the legend and make it horizontal
and position it somewhat in the top right corner. We also need to fix the labels
and get rid of the NA category.</p>
<p>In order to get the labels of the scale to their correct position, there were
some tricks needed. By default the labels would be centered under each category
and by moving them to the left or right they wouldn’t center, since they
all have a different length.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>X</span> <span class='op'>&lt;-</span> <span class='va'>X</span> <span class='op'>+</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>legend.direction <span class='op'>=</span> <span class='st'>"horizontal"</span>,</span>
<span>        legend.position <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.85</span>, <span class='fl'>0.99</span><span class='op'>)</span>,</span>
<span>        legend.title <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>14</span>, </span>
<span>                                    face <span class='op'>=</span> <span class='st'>"bold"</span>, </span>
<span>                                    color <span class='op'>=</span> <span class='st'>"#030001"</span><span class='op'>)</span>,</span>
<span>        legend.text <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>12</span>, </span>
<span>                                   color <span class='op'>=</span> <span class='st'>"#030001"</span><span class='op'>)</span>,</span>
<span>        legend.margin <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span>t <span class='op'>=</span> <span class='fl'>0</span>, r <span class='op'>=</span> <span class='fl'>0</span>, b <span class='op'>=</span> <span class='fl'>0</span>, l <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span>,</span>
<span>        panel.margin <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span>t <span class='op'>=</span> <span class='fl'>500</span>, r <span class='op'>=</span> <span class='fl'>50</span>, b <span class='op'>=</span> <span class='fl'>50</span>, l <span class='op'>=</span> <span class='fl'>50</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='va'>colors</span>, name <span class='op'>=</span> <span class='st'>"U.S. Trade (Billion US$)"</span>,</span>
<span>                    breaks <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"0"</span>, <span class='st'>"0.1"</span>, <span class='st'>"1"</span>, <span class='st'>"10"</span>, <span class='st'>"100"</span>, <span class='st'>"1000"</span><span class='op'>)</span>,</span>
<span>                    labels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"   0  "</span>,</span>
<span>                               <span class='st'>"0.1   "</span>, </span>
<span>                               <span class='st'>"   1  "</span>, </span>
<span>                               <span class='st'>" 10   "</span>, </span>
<span>                               <span class='st'>"100   "</span>, </span>
<span>                               <span class='st'>"1000  "</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/guides.html'>guides</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/guide_legend.html'>guide_legend</a></span><span class='op'>(</span></span>
<span>    title.position <span class='op'>=</span> <span class='st'>"top"</span>,</span>
<span>    title.hjust <span class='op'>=</span> <span class='fl'>0.5</span>,</span>
<span>    label.position <span class='op'>=</span> <span class='st'>"bottom"</span>,</span>
<span>    label.hjust <span class='op'>=</span> <span class='op'>-</span><span class='fl'>1</span>,</span>
<span>    label.vjust <span class='op'>=</span> <span class='fl'>0.5</span>,</span>
<span>    keywidth <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/grid/unit.html'>unit</a></span><span class='op'>(</span><span class='fl'>1.5</span>, <span class='st'>"cm"</span><span class='op'>)</span>,</span>
<span>    keyheight <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/grid/unit.html'>unit</a></span><span class='op'>(</span><span class='fl'>0.2</span>, <span class='st'>"cm"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>X</span></span></code></pre>
</div>
<p><img src="100543010_files/figure-html5/unnamed-chunk-7-1.png" width="1344" style="display: block; margin: auto;" /></p>
</div>
<h3 id="the-flag">The flag</h3>
<p>After creating the basic map, we can start adding the details. Most
notably, the flag is still missing. For this we are going to use the flagon
package to get the image of the flag and the spData package for the isolated
US mainland and Alaska multipolygon. The flagon package is not available to
be downloaded through the regular R function, therefore we must take a slightly
different approach and download it directly from github.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>usa</span> <span class='op'>&lt;-</span> <span class='fu'>spData</span><span class='fu'>::</span><span class='va'><a href='https://jakubnowosad.com/spData/reference/us_states.html'>us_states</a></span> <span class='op'>|&gt;</span> <span class='fu'>sf</span><span class='fu'>::</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/geos_combine.html'>st_union</a></span><span class='op'>(</span><span class='op'>)</span></span>
<span><span class='va'>alaska</span> <span class='op'>&lt;-</span> <span class='fu'>spData</span><span class='fu'>::</span><span class='va'><a href='https://jakubnowosad.com/spData/reference/alaska.html'>alaska</a></span></span>
<span></span>
<span></span>
<span><span class='fu'><a href='https://remotes.r-lib.org/reference/install_github.html'>install_github</a></span><span class='op'>(</span><span class='st'>"coolbutuseless/flagon"</span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>flagon</span><span class='op'>)</span></span>
<span><span class='va'>flag</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/flagon/man/flags.html'>flags</a></span><span class='op'>(</span><span class='st'>"US"</span>, filetype <span class='op'>=</span> <span class='st'>"png"</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>X1</span> <span class='op'>&lt;-</span> <span class='va'>X</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://trevorldavis.com/R/ggpattern/reference/geom-docs.html'>geom_sf_pattern</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>usa</span>, </span>
<span>                  pattern <span class='op'>=</span> <span class='st'>'image'</span>,</span>
<span>                  pattern_filename <span class='op'>=</span> <span class='va'>flag</span>,</span>
<span>                  pattern_type <span class='op'>=</span> <span class='st'>"expand"</span>,</span>
<span>                  color <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://trevorldavis.com/R/ggpattern/reference/geom-docs.html'>geom_sf_pattern</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>alaska</span>, </span>
<span>                  pattern <span class='op'>=</span> <span class='st'>'image'</span>, </span>
<span>                  pattern_filename <span class='op'>=</span> <span class='va'>flag</span>,</span>
<span>                  pattern_type <span class='op'>=</span> <span class='st'>"none"</span>, </span>
<span>                  pattern_scale<span class='op'>=</span> <span class='fl'>0.3</span>, </span>
<span>                  pattern_gravity <span class='op'>=</span> <span class='st'>"southwest"</span>,</span>
<span>                  color <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span><span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggsf.html'>coord_sf</a></span><span class='op'>(</span>crs <span class='op'>=</span> <span class='st'>"+proj=robin"</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<h3 id="the-eu-27-subplot">The EU-27 subplot</h3>
<p>Having fitted the flag we now continue by creating the EU-27 subplot.
First we had to define a new vector with the EU-27 countries from the original
plot. After this, the world dataset is filtered so only the EU-27 countries
remain and we can create the new plot. After that we then only have to set the
borders so we don’t get the islands in the atlantic.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>EU_27</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Austria"</span>, <span class='st'>"Belgium"</span>, <span class='st'>"Bulgaria"</span>, <span class='st'>"Croatia"</span>, <span class='st'>"Cyprus"</span>, </span>
<span>           <span class='st'>"Czech Republic"</span>, <span class='st'>"Denmark"</span>, <span class='st'>"Estonia"</span>, <span class='st'>"Finland"</span>, <span class='st'>"France"</span>, </span>
<span>           <span class='st'>"Germany"</span>, <span class='st'>"Greece"</span>, <span class='st'>"Hungary"</span>, <span class='st'>"Ireland"</span>, <span class='st'>"Italy"</span>, <span class='st'>"Latvia"</span>, </span>
<span>           <span class='st'>"Lithuania"</span>, <span class='st'>"Luxembourg"</span>, <span class='st'>"Malta"</span>, <span class='st'>"Netherlands"</span>, <span class='st'>"Poland"</span>, </span>
<span>           <span class='st'>"Portugal"</span>, <span class='st'>"Romania"</span>, <span class='st'>"Slovakia"</span>, <span class='st'>"Slovenia"</span>, <span class='st'>"Spain"</span>, <span class='st'>"Sweden"</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>world_EU</span> <span class='op'>&lt;-</span> <span class='va'>world</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>name_long</span> <span class='op'><a href='https://rdrr.io/r/base/match.html'>%in%</a></span> <span class='va'>EU_27</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>EU</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>world_EU</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggsf.html'>geom_sf</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#01339a"</span>, </span>
<span>          color <span class='op'>=</span> <span class='st'>"#faf8f4"</span>, </span>
<span>          linewidth <span class='op'>=</span> <span class='fl'>0.25</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggsf.html'>coord_sf</a></span><span class='op'>(</span>xlim <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>20</span>,<span class='fl'>40</span><span class='op'>)</span>, </span>
<span>           ylim <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>35</span>,<span class='fl'>70</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggsf.html'>coord_sf</a></span><span class='op'>(</span>crs <span class='op'>=</span> <span class='st'>"+proj=longlat"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_void</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<h3 id="adding-them-together">Adding them together</h3>
<p>To finalize the map of our plot we add the EU-27 plot to the main plot. There
is a package called ggpatchwork for this, which allows us to position it and
scale it accordingly. This will now yield our final map which only needs
the annotations to make it complete</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>M</span> <span class='op'>&lt;-</span> <span class='va'>X1</span> <span class='op'>+</span> <span class='fu'><a href='https://patchwork.data-imaginist.com/reference/inset_element.html'>inset_element</a></span><span class='op'>(</span><span class='va'>EU</span>, left <span class='op'>=</span> <span class='fl'>0.13</span>, bottom <span class='op'>=</span> <span class='fl'>0.4</span>, right <span class='op'>=</span> <span class='fl'>0.63</span>, </span>
<span>                       top <span class='op'>=</span> <span class='fl'>0.725</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>M</span></span></code></pre>
</div>
<p><img src="100543010_files/figure-html5/unnamed-chunk-10-1.png" width="1344" style="display: block; margin: auto;" /></p>
</div>
<h3 id="annotations">Annotations</h3>
<p>To finalize our plot we now need to add all the annotations. This step is a bit
tedious, since every annotation has to be added manually. Additionally to this,
certain elements of the annotation have to be somewhat “constructed”, like the
background of the numbers corresponding to the countries.
To simplify the process of finding the correct font size and
being able to adjust it across all annotations efficiently, the font size is
defined by a variable. Since the annotations are hierarchical, we can layer
shapes and texts on top of each other. This allowed the creation of the circles
whit a number on top. There is also the instance of Germany and the Netherlands,
where this feature has been taken advantage of. For these two annotations, the
background has been filled with the color of the main background, so we can
cover some small islands there. These were not able to being filtered out,
since their geometrical information is stored in the variable with some of the
mainland countries.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>font_size</span> <span class='op'>&lt;-</span> <span class='fl'>3</span></span>
<span></span>
<span><span class='va'>X2</span> <span class='op'>&lt;-</span> <span class='va'>X1</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='op'>-</span><span class='fl'>9700000</span>, y <span class='op'>=</span> <span class='fl'>2100000</span>, </span>
<span>             size <span class='op'>=</span> <span class='fl'>6.5</span>, stroke <span class='op'>=</span> <span class='fl'>1</span>, shape <span class='op'>=</span> <span class='fl'>21</span>,</span>
<span>             color <span class='op'>=</span> <span class='st'>"violet"</span>, fill <span class='op'>=</span> <span class='st'>"black"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"text"</span>, x <span class='op'>=</span> <span class='op'>-</span><span class='fl'>9700000</span>, y <span class='op'>=</span> <span class='fl'>2100000</span>, </span>
<span>           label <span class='op'>=</span> <span class='st'>"1"</span>, color <span class='op'>=</span> <span class='st'>"white"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"richtext"</span>, x <span class='op'>=</span> <span class='op'>-</span><span class='fl'>9700000</span>, y <span class='op'>=</span> <span class='fl'>1400000</span>,</span>
<span>           label <span class='op'>=</span> <span class='st'>"Mexico&lt;br&gt;&lt;b&gt;$803B&lt;/b&gt;"</span>,</span>
<span>           size <span class='op'>=</span> <span class='va'>font_size</span>,</span>
<span>           lineheight <span class='op'>=</span> <span class='fl'>0.8</span>,</span>
<span>           fill <span class='op'>=</span> <span class='cn'>NA</span>,</span>
<span>           label.color <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='op'>-</span><span class='fl'>8200000</span> , y <span class='op'>=</span> <span class='fl'>5800000</span> <span class='op'>+</span> <span class='fl'>700000</span>, </span>
<span>             size <span class='op'>=</span> <span class='fl'>6.5</span>, stroke <span class='op'>=</span> <span class='fl'>1</span>, shape <span class='op'>=</span> <span class='fl'>21</span>,</span>
<span>             color <span class='op'>=</span> <span class='st'>"violet"</span>, fill <span class='op'>=</span> <span class='st'>"black"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"text"</span>, x <span class='op'>=</span> <span class='op'>-</span><span class='fl'>8200000</span> , y <span class='op'>=</span> <span class='fl'>5800000</span> <span class='op'>+</span> <span class='fl'>700000</span>, </span>
<span>           label <span class='op'>=</span> <span class='st'>"2"</span>, color <span class='op'>=</span> <span class='st'>"white"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"richtext"</span>, x<span class='op'>=</span> <span class='op'>-</span><span class='fl'>8200000</span>, y <span class='op'>=</span> <span class='fl'>5800000</span>,</span>
<span>           label <span class='op'>=</span> <span class='st'>"Canada&lt;br&gt;&lt;b&gt;$784B&lt;/b&gt;"</span>,</span>
<span>           size <span class='op'>=</span> <span class='va'>font_size</span>,</span>
<span>           lineheight <span class='op'>=</span> <span class='fl'>0.8</span>,</span>
<span>           fill <span class='op'>=</span> <span class='cn'>NA</span>,</span>
<span>           label.color <span class='op'>=</span> <span class='cn'>NA</span>,</span>
<span>           color <span class='op'>=</span> <span class='st'>"white"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>9100000</span> <span class='op'>-</span><span class='fl'>800000</span>, y <span class='op'>=</span> <span class='fl'>3700000</span> <span class='op'>+</span> <span class='fl'>180000</span>, </span>
<span>             size <span class='op'>=</span> <span class='fl'>6.5</span>, stroke <span class='op'>=</span> <span class='fl'>1</span>, shape <span class='op'>=</span> <span class='fl'>21</span>,</span>
<span>             color <span class='op'>=</span> <span class='st'>"violet"</span>, fill <span class='op'>=</span> <span class='st'>"black"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"text"</span>, x <span class='op'>=</span> <span class='fl'>9100000</span> <span class='op'>-</span> <span class='fl'>800000</span>, y <span class='op'>=</span> <span class='fl'>3700000</span> <span class='op'>+</span> <span class='fl'>180000</span>, </span>
<span>           label <span class='op'>=</span> <span class='st'>"3"</span>, color <span class='op'>=</span> <span class='st'>"white"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"richtext"</span>, x<span class='op'>=</span> <span class='fl'>9100000</span>, y <span class='op'>=</span> <span class='fl'>3700000</span>,</span>
<span>           label <span class='op'>=</span> <span class='st'>"China&lt;br&gt;&lt;b&gt;$596B&lt;/b&gt;"</span>,</span>
<span>           size <span class='op'>=</span> <span class='va'>font_size</span>,</span>
<span>           lineheight <span class='op'>=</span> <span class='fl'>0.8</span>,</span>
<span>           fill <span class='op'>=</span> <span class='cn'>NA</span>,</span>
<span>           label.color <span class='op'>=</span> <span class='cn'>NA</span>,</span>
<span>           color <span class='op'>=</span> <span class='st'>"white"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"richtext"</span>, x<span class='op'>=</span> <span class='fl'>1680000</span>, y <span class='op'>=</span> <span class='fl'>7800000</span>,</span>
<span>           label <span class='op'>=</span> <span class='st'>"Germany&lt;br&gt;&lt;b&gt;$240B&lt;/b&gt;"</span>,</span>
<span>           size <span class='op'>=</span> <span class='va'>font_size</span>,</span>
<span>           lineheight <span class='op'>=</span> <span class='fl'>0.8</span>,</span>
<span>           fill <span class='op'>=</span> <span class='st'>"#faf8f4"</span>,</span>
<span>           label.color <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>1680000</span>, y <span class='op'>=</span> <span class='fl'>7800000</span> <span class='op'>+</span> <span class='fl'>700000</span>, </span>
<span>             size <span class='op'>=</span> <span class='fl'>6.5</span>, stroke <span class='op'>=</span> <span class='fl'>1</span>, shape <span class='op'>=</span> <span class='fl'>21</span>,</span>
<span>             color <span class='op'>=</span> <span class='st'>"violet"</span>, fill <span class='op'>=</span> <span class='st'>"black"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"text"</span>, x <span class='op'>=</span> <span class='fl'>1680000</span>, y <span class='op'>=</span> <span class='fl'>7800000</span> <span class='op'>+</span> <span class='fl'>700000</span>, </span>
<span>           label <span class='op'>=</span> <span class='st'>"4"</span>, color <span class='op'>=</span> <span class='st'>"white"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>13000000</span>, y <span class='op'>=</span> <span class='fl'>3900000</span> <span class='op'>+</span> <span class='fl'>700000</span>, </span>
<span>             size <span class='op'>=</span> <span class='fl'>6.5</span>, stroke <span class='op'>=</span> <span class='fl'>1</span>, shape <span class='op'>=</span> <span class='fl'>21</span>,</span>
<span>             color <span class='op'>=</span> <span class='st'>"violet"</span>, fill <span class='op'>=</span> <span class='st'>"black"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"text"</span>, x <span class='op'>=</span> <span class='fl'>13000000</span>, y <span class='op'>=</span> <span class='fl'>3900000</span> <span class='op'>+</span> <span class='fl'>700000</span>, </span>
<span>           label <span class='op'>=</span> <span class='st'>"5"</span>, color <span class='op'>=</span> <span class='st'>"white"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"richtext"</span>, x<span class='op'>=</span> <span class='fl'>13000000</span>, y <span class='op'>=</span> <span class='fl'>3900000</span>,</span>
<span>           label <span class='op'>=</span> <span class='st'>"Japan&lt;br&gt;&lt;b&gt;$228B&lt;/b&gt;"</span>,</span>
<span>           size <span class='op'>=</span> <span class='va'>font_size</span>,</span>
<span>           lineheight <span class='op'>=</span> <span class='fl'>0.8</span>,</span>
<span>           fill <span class='op'>=</span> <span class='cn'>NA</span>,</span>
<span>           label.color <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>12600000</span> <span class='op'>-</span><span class='fl'>1000000</span>, y <span class='op'>=</span> <span class='fl'>3000000</span> <span class='op'>+</span> <span class='fl'>180000</span>, </span>
<span>             size <span class='op'>=</span> <span class='fl'>6.5</span>, stroke <span class='op'>=</span> <span class='fl'>1</span>, shape <span class='op'>=</span> <span class='fl'>21</span>,</span>
<span>             color <span class='op'>=</span> <span class='st'>"violet"</span>, fill <span class='op'>=</span> <span class='st'>"black"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"text"</span>, x <span class='op'>=</span> <span class='fl'>12600000</span> <span class='op'>-</span><span class='fl'>1000000</span>, y <span class='op'>=</span> <span class='fl'>3000000</span> <span class='op'>+</span> <span class='fl'>180000</span>, </span>
<span>           label <span class='op'>=</span> <span class='st'>"6"</span>, color <span class='op'>=</span> <span class='st'>"white"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"richtext"</span>, x<span class='op'>=</span> <span class='fl'>12600000</span>, y <span class='op'>=</span> <span class='fl'>3000000</span>,</span>
<span>           label <span class='op'>=</span> <span class='st'>"S.Korea&lt;br&gt;&lt;b&gt;$185B&lt;/b&gt;"</span>,</span>
<span>           size <span class='op'>=</span> <span class='va'>font_size</span>,</span>
<span>           lineheight <span class='op'>=</span> <span class='fl'>0.8</span>,</span>
<span>           fill <span class='op'>=</span> <span class='cn'>NA</span>,</span>
<span>           label.color <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"richtext"</span>, x<span class='op'>=</span> <span class='fl'>70000</span>, y <span class='op'>=</span> <span class='fl'>7800000</span>,</span>
<span>           label <span class='op'>=</span> <span class='st'>"Netherlands&lt;br&gt;&lt;b&gt;$122B&lt;/b&gt;"</span>,</span>
<span>           size <span class='op'>=</span> <span class='va'>font_size</span>,</span>
<span>           lineheight <span class='op'>=</span> <span class='fl'>0.8</span>,</span>
<span>           fill <span class='op'>=</span> <span class='st'>"#faf8f4"</span>,</span>
<span>           label.color <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='op'>-</span><span class='fl'>300000</span> <span class='op'>-</span><span class='fl'>370000</span>, y <span class='op'>=</span> <span class='fl'>6550000</span> <span class='op'>+</span> <span class='fl'>600000</span>, </span>
<span>             size <span class='op'>=</span> <span class='fl'>6.5</span>, stroke <span class='op'>=</span> <span class='fl'>1</span>, shape <span class='op'>=</span> <span class='fl'>21</span>,</span>
<span>             color <span class='op'>=</span> <span class='st'>"violet"</span>, fill <span class='op'>=</span> <span class='st'>"black"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"text"</span>, x <span class='op'>=</span> <span class='op'>-</span><span class='fl'>300000</span> <span class='op'>-</span><span class='fl'>370000</span>, y <span class='op'>=</span> <span class='fl'>6550000</span> <span class='op'>+</span> <span class='fl'>600000</span>, </span>
<span>           label <span class='op'>=</span> <span class='st'>"7"</span>, color <span class='op'>=</span> <span class='st'>"white"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"richtext"</span>, x<span class='op'>=</span> <span class='op'>-</span><span class='fl'>300000</span>, y <span class='op'>=</span> <span class='fl'>6550000</span>,</span>
<span>           label <span class='op'>=</span> <span class='st'>"UK&lt;br&gt;&lt;b&gt;$140B&lt;/b&gt;"</span>,</span>
<span>           size <span class='op'>=</span> <span class='va'>font_size</span>,</span>
<span>           lineheight <span class='op'>=</span> <span class='fl'>0.8</span>,</span>
<span>           fill <span class='op'>=</span> <span class='cn'>NA</span>,</span>
<span>           label.color <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>12200000</span> <span class='op'>-</span><span class='fl'>900000</span>, y <span class='op'>=</span> <span class='fl'>2350000</span> <span class='op'>+</span> <span class='fl'>180000</span>, </span>
<span>             size <span class='op'>=</span> <span class='fl'>6.5</span>, stroke <span class='op'>=</span> <span class='fl'>1</span>, shape <span class='op'>=</span> <span class='fl'>21</span>,</span>
<span>             color <span class='op'>=</span> <span class='st'>"violet"</span>, fill <span class='op'>=</span> <span class='st'>"black"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"text"</span>, x <span class='op'>=</span> <span class='fl'>12200000</span> <span class='op'>-</span><span class='fl'>900000</span>, y <span class='op'>=</span> <span class='fl'>2350000</span> <span class='op'>+</span> <span class='fl'>180000</span>, </span>
<span>           label <span class='op'>=</span> <span class='st'>"8"</span>, color <span class='op'>=</span> <span class='st'>"white"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"richtext"</span>, x<span class='op'>=</span> <span class='fl'>12200000</span>, y <span class='op'>=</span> <span class='fl'>2350000</span>,</span>
<span>           label <span class='op'>=</span> <span class='st'>"Taiwan&lt;br&gt;&lt;b&gt;$130B&lt;/b&gt;"</span>,</span>
<span>           size <span class='op'>=</span> <span class='va'>font_size</span>,</span>
<span>           lineheight <span class='op'>=</span> <span class='fl'>0.8</span>,</span>
<span>           fill <span class='op'>=</span> <span class='cn'>NA</span>,</span>
<span>           label.color <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>10750000</span> , y <span class='op'>=</span> <span class='fl'>1500000</span> <span class='op'>+</span> <span class='fl'>700000</span>, </span>
<span>             size <span class='op'>=</span> <span class='fl'>6.5</span>, stroke <span class='op'>=</span> <span class='fl'>1</span>, shape <span class='op'>=</span> <span class='fl'>21</span>,</span>
<span>             color <span class='op'>=</span> <span class='st'>"violet"</span>, fill <span class='op'>=</span> <span class='st'>"black"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"text"</span>, x <span class='op'>=</span> <span class='fl'>10750000</span> , y <span class='op'>=</span> <span class='fl'>1500000</span> <span class='op'>+</span> <span class='fl'>700000</span>, </span>
<span>           label <span class='op'>=</span> <span class='st'>"9"</span>, color <span class='op'>=</span> <span class='st'>"white"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"richtext"</span>, x<span class='op'>=</span> <span class='fl'>10750000</span>, y <span class='op'>=</span> <span class='fl'>1500000</span>,</span>
<span>           label <span class='op'>=</span> <span class='st'>"Vietnam&lt;br&gt;&lt;b&gt;$129B&lt;/b&gt;"</span>,</span>
<span>           size <span class='op'>=</span> <span class='va'>font_size</span>,</span>
<span>           lineheight <span class='op'>=</span> <span class='fl'>0.8</span>,</span>
<span>           fill <span class='op'>=</span> <span class='cn'>NA</span>,</span>
<span>           label.color <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>7450000</span> <span class='op'>-</span><span class='fl'>390000</span>, y <span class='op'>=</span> <span class='fl'>2400000</span> <span class='op'>+</span> <span class='fl'>400000</span>, </span>
<span>             size <span class='op'>=</span> <span class='fl'>6.5</span>, stroke <span class='op'>=</span> <span class='fl'>1</span>, shape <span class='op'>=</span> <span class='fl'>21</span>,</span>
<span>             color <span class='op'>=</span> <span class='st'>"violet"</span>, fill <span class='op'>=</span> <span class='st'>"black"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"text"</span>, x <span class='op'>=</span> <span class='fl'>7450000</span> <span class='op'>-</span><span class='fl'>390000</span>, y <span class='op'>=</span> <span class='fl'>2400000</span> <span class='op'>+</span> <span class='fl'>400000</span>, </span>
<span>           label <span class='op'>=</span> <span class='st'>"10"</span>, color <span class='op'>=</span> <span class='st'>"white"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"richtext"</span>, x<span class='op'>=</span> <span class='fl'>7450000</span>, y <span class='op'>=</span> <span class='fl'>2200000</span>,</span>
<span>           label <span class='op'>=</span> <span class='st'>"India&lt;br&gt;&lt;b&gt;$127B&lt;/b&gt;"</span>,</span>
<span>           size <span class='op'>=</span> <span class='va'>font_size</span>,</span>
<span>           lineheight <span class='op'>=</span> <span class='fl'>0.8</span>,</span>
<span>           fill <span class='op'>=</span> <span class='cn'>NA</span>,</span>
<span>           label.color <span class='op'>=</span> <span class='cn'>NA</span>,</span>
<span>           color <span class='op'>=</span> <span class='st'>"white"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"richtext"</span>, x<span class='op'>=</span> <span class='fl'>7300000</span>, y <span class='op'>=</span> <span class='fl'>6500000</span>,</span>
<span>           label <span class='op'>=</span> <span class='st'>"Russia&lt;br&gt;&lt;b&gt;$5.5B&lt;/b&gt;"</span>,</span>
<span>           size <span class='op'>=</span> <span class='va'>font_size</span>,</span>
<span>           lineheight <span class='op'>=</span> <span class='fl'>0.8</span>,</span>
<span>           fill <span class='op'>=</span> <span class='cn'>NA</span>,</span>
<span>           label.color <span class='op'>=</span> <span class='cn'>NA</span>,</span>
<span>           color <span class='op'>=</span> <span class='st'>"white"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>   </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"richtext"</span>, x<span class='op'>=</span> <span class='op'>-</span><span class='fl'>4000000</span>, y <span class='op'>=</span> <span class='fl'>4000000</span>,</span>
<span>           label <span class='op'>=</span> <span class='st'>"EU-27&lt;br&gt;&lt;b&gt;$960B&lt;/b&gt;"</span>,</span>
<span>           size <span class='op'>=</span> <span class='va'>font_size</span>,</span>
<span>           lineheight <span class='op'>=</span> <span class='fl'>0.8</span>,</span>
<span>           fill <span class='op'>=</span> <span class='cn'>NA</span>,</span>
<span>           label.color <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"richtext"</span>, x<span class='op'>=</span> <span class='op'>-</span><span class='fl'>4800000</span>, y <span class='op'>=</span> <span class='op'>-</span><span class='fl'>850000</span>,</span>
<span>           label <span class='op'>=</span> <span class='st'>"Brazil&lt;br&gt;&lt;b&gt;$86B&lt;/b&gt;"</span>,</span>
<span>           size <span class='op'>=</span> <span class='va'>font_size</span>,</span>
<span>           lineheight <span class='op'>=</span> <span class='fl'>0.8</span>,</span>
<span>           fill <span class='op'>=</span> <span class='cn'>NA</span>,</span>
<span>           label.color <span class='op'>=</span> <span class='cn'>NA</span>,</span>
<span>           color <span class='op'>=</span> <span class='st'>"white"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"richtext"</span>, x<span class='op'>=</span> <span class='fl'>3250000</span>, y <span class='op'>=</span> <span class='op'>-</span><span class='fl'>4000000</span>,</span>
<span>           label <span class='op'>=</span> <span class='st'>"South Africa&lt;br&gt;&lt;b&gt;$21B&lt;/b&gt;"</span>,</span>
<span>           size <span class='op'>=</span> <span class='va'>font_size</span>,</span>
<span>           lineheight <span class='op'>=</span> <span class='fl'>0.8</span>,</span>
<span>           fill <span class='op'>=</span> <span class='cn'>NA</span>,</span>
<span>           label.color <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"richtext"</span>, x<span class='op'>=</span> <span class='fl'>12500000</span>, y <span class='op'>=</span> <span class='op'>-</span><span class='fl'>2500000</span>,</span>
<span>           label <span class='op'>=</span> <span class='st'>"Australia&lt;br&gt;&lt;b&gt;$50B&lt;/b&gt;"</span>,</span>
<span>           size <span class='op'>=</span> <span class='va'>font_size</span>,</span>
<span>           lineheight <span class='op'>=</span> <span class='fl'>0.8</span>,</span>
<span>           fill <span class='op'>=</span> <span class='cn'>NA</span>,</span>
<span>           label.color <span class='op'>=</span> <span class='cn'>NA</span>,</span>
<span>           color <span class='op'>=</span> <span class='st'>"white"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"richtext"</span>, x<span class='op'>=</span> <span class='op'>-</span><span class='fl'>900000</span>, y <span class='op'>=</span> <span class='fl'>5000000</span>,</span>
<span>           label <span class='op'>=</span> <span class='st'>"France&lt;br&gt;&lt;b&gt;$104B&lt;/b&gt;"</span>,</span>
<span>           size <span class='op'>=</span> <span class='va'>font_size</span>,</span>
<span>           lineheight <span class='op'>=</span> <span class='fl'>0.8</span>,</span>
<span>           fill <span class='op'>=</span> <span class='cn'>NA</span>,</span>
<span>           label.color <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"richtext"</span>, x<span class='op'>=</span> <span class='op'>-</span><span class='fl'>1400000</span>, y <span class='op'>=</span> <span class='fl'>4250000</span>,</span>
<span>           label <span class='op'>=</span> <span class='st'>"Spain&lt;br&gt;&lt;b&gt;$49B&lt;/b&gt;"</span>,</span>
<span>           size <span class='op'>=</span> <span class='va'>font_size</span>,</span>
<span>           lineheight <span class='op'>=</span> <span class='fl'>0.8</span>,</span>
<span>           fill <span class='op'>=</span> <span class='cn'>NA</span>,</span>
<span>           label.color <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate</a></span><span class='op'>(</span><span class='st'>"richtext"</span>, x<span class='op'>=</span> <span class='fl'>1500000</span>, y <span class='op'>=</span> <span class='fl'>3500000</span>,</span>
<span>           label <span class='op'>=</span> <span class='st'>"Italy&lt;br&gt;&lt;b&gt;$104B&lt;/b&gt;"</span>,</span>
<span>           size <span class='op'>=</span> <span class='va'>font_size</span>,</span>
<span>           lineheight <span class='op'>=</span> <span class='fl'>0.8</span>,</span>
<span>           fill <span class='op'>=</span> <span class='cn'>NA</span>,</span>
<span>           label.color <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>X2</span></span></code></pre>
</div>
<img src="100543010_files/figure-html5/unnamed-chunk-11-1.png" width="1344" style="display: block; margin: auto;" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>M</span> <span class='op'>&lt;-</span> <span class='va'>X2</span> <span class='op'>+</span> <span class='fu'><a href='https://patchwork.data-imaginist.com/reference/inset_element.html'>inset_element</a></span><span class='op'>(</span><span class='va'>EU</span>, left <span class='op'>=</span> <span class='fl'>0.13</span>, bottom <span class='op'>=</span> <span class='fl'>0.4</span>, right <span class='op'>=</span> <span class='fl'>0.63</span>, </span>
<span>                       top <span class='op'>=</span> <span class='fl'>0.725</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>M</span></span></code></pre>
</div>
<p><img src="100543010_files/figure-html5/unnamed-chunk-11-2.png" width="1344" style="display: block; margin: auto;" /></p>
</div>
<div class="sourceCode" id="cb1"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
